SET sql_mode=ORACLE;

--echo #
--echo # MDEV-10152 Add support for TYPE .. IS REF CURSOR
--echo #

#
# Make sure SYS_REFCURSOR or REF CURSOR cannot be used
# as an assoc array element
#

DELIMITER $$;
--error ER_ILLEGAL_PARAMETER_DATA_TYPE_FOR_OPERATION
CREATE PROCEDURE p1 AS
  TYPE assoc0_t IS TABLE OF SYS_REFCURSOR INDEX BY INT;
BEGIN
  NULL;
END;
$$
DELIMITER ;$$


DELIMITER $$;
--error ER_ILLEGAL_PARAMETER_DATA_TYPE_FOR_OPERATION
CREATE PROCEDURE p1 AS
  TYPE cur0_t IS REF CURSOR;
  TYPE assoc0_t IS TABLE OF cur0_t INDEX BY INT;
BEGIN
  NULL;
END;
$$
DELIMITER ;$$


DELIMITER $$;
--error ER_ILLEGAL_PARAMETER_DATA_TYPE_FOR_OPERATION
CREATE PROCEDURE p1 AS
  TYPE rec0_t IS RECORD(a INT, b VARCHAR(2));
  TYPE cur0_t IS REF CURSOR RETURN rec0_t;
  TYPE assoc0_t IS TABLE OF cur0_t INDEX BY INT;
BEGIN
  NULL;
END;
$$
DELIMITER ;$$
