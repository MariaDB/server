#
# MDEV-20034 Add support for the pre-defined weak SYS_REFCURSOR
#
CREATE AGGREGATE FUNCTION f1(x int) RETURNS INT
BEGIN
DECLARE c SYS_REFCURSOR;
DECLARE mini INT DEFAULT 0;
DECLARE CONTINUE HANDLER FOR NOT FOUND RETURN mini;
LOOP
FETCH GROUP NEXT ROW;
SET mini= mini+x;
FETCH GROUP NEXT ROW;
END LOOP;
END;
/
ERROR HY000: 'sys_refcursor' is not allowed in this context
