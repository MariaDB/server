set generate_embedding_openai_host="http://127.0.0.1:OPENAI_PORT/success";
create table exp_test_new (
c text, d text, 
b text as (concat(c,d)),
embedding vector(1536) as (generate_embedding_openai(b, "text-embedding-ada-002")) stored
) engine=MyISAM;
insert into exp_test_new (c,d) values ("ab", "bc");
1
alter table exp_test_new add x int;
1
select c, d, b, embedding is null from exp_test_new;
c	d	b	embedding is null
ab	bc	abbc	0
alter table exp_test_new modify c varchar(50);
2
select c, d, b, embedding is null from exp_test_new;
c	d	b	embedding is null
ab	bc	abbc	0
alter table exp_test_new modify embedding vector(1537);
2
select c, d, b, embedding is null from exp_test_new;
c	d	b	embedding is null
ab	bc	abbc	0
alter table exp_test_new modify b varchar(50) as (concat(c,d));
2
select c, d, b, embedding is null from exp_test_new;
c	d	b	embedding is null
ab	bc	abbc	0
alter table exp_test_new modify embedding vector(1536) as (generate_embedding_openai(b, "text-embedding-3-small")) stored;
3
select c, d, b, embedding is null from exp_test_new;
c	d	b	embedding is null
ab	bc	abbc	0
drop table exp_test_new;
