# UUID_TIMESTAMP() function to extract timestamp from UUIDv1 and UUIDv7

SELECT UUID_TIMESTAMP('018d17f3-e9a3-7000-8000-000000000000');

SELECT UUID_TIMESTAMP('0188b5b8-8000-7000-8000-000000000000');

SELECT UUID_TIMESTAMP('1ee81f00-a8a8-11ee-8000-000000000000') IS NOT NULL AS has_timestamp;

SET @uuid1 = UUID();
SELECT UUID_TIMESTAMP(@uuid1) IS NOT NULL AS has_timestamp;

SELECT TIMESTAMPDIFF(SECOND, UUID_TIMESTAMP(UUID()), NOW()) BETWEEN -5 AND 5 AS timestamp_is_recent;

SET @uuid7 = UUID_V7();
SELECT UUID_TIMESTAMP(@uuid7) IS NOT NULL AS has_timestamp;

SELECT TIMESTAMPDIFF(SECOND, UUID_TIMESTAMP(UUID_V7()), NOW()) BETWEEN -5 AND 5 AS timestamp_is_recent;

SELECT UUID_TIMESTAMP(UUID_V4()) IS NULL AS no_timestamp_for_v4;

SELECT UUID_TIMESTAMP('a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11') IS NULL AS no_timestamp_for_v4;

SELECT UUID_TIMESTAMP(NULL);

SELECT UUID_TIMESTAMP('not-a-valid-uuid');

SELECT UUID_TIMESTAMP(CAST('018d17f3-e9a3-7000-8000-000000000000' AS UUID));

CREATE TABLE t1 AS SELECT UUID_TIMESTAMP(UUID()) AS ts;
SHOW CREATE TABLE t1;
DROP TABLE t1;

CREATE TABLE t1 AS SELECT UUID_TIMESTAMP(UUID_V7()) AS ts;
SHOW CREATE TABLE t1;
DROP TABLE t1;

SELECT UUID_TIMESTAMP('018d17f3-e9a3-7000-8000-000000000000');

SELECT UUID_TIMESTAMP('00000000-0000-1000-8000-000000000000') IS NULL AS before_unix_epoch;

