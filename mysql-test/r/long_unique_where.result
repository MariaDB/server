create table t1(abc blob unique);
insert into t1 values(1),(2),(3),(4),(5),(11),(12),(31),(14),(15),(NULL)
,(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),
(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),(NULL),
(NULL),(NULL),(NULL),(NULL),(NULL);
insert into t1 value(1);
ERROR 23000: Duplicate entry '1' for key 'abc'
explain select * from t1 where abc=31;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc	abc	9	const	1	
select * from t1 where abc=31;
abc
31
# in case of null we do not use any optimization
explain select * from t1 where abc is  NULL;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	36	Using where
select * from t1 where abc is  NULL limit 1;
abc
NULL
#range query
explain select * from t1 where abc >1  limit 1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	36	Using where
select * from t1 where abc >1 limit 1;
abc
2
explain select * from t1 where abc >1 and abc <4;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	36	Using where
select * from t1 where abc >1 and abc <4;
abc
2
3
explain select * from t1 where abc =15 or abc <4 ;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	36	Using where
select * from t1 where abc =15 or abc <4 ;
abc
1
2
3
15
drop table t1;
create table t1(abc blob unique, xyz int );
insert into t1 values(1,1),(2,1),(3,3),(4,1),(5,6),(NULL,3),(NULL,1),
(NULL,NULL),(11,11),(12,11),(31,31),
(14,1),(15,61),(NULL,32),(NULL,12),(NULL,NULL);
insert into t1 value(1,NULL);
ERROR 23000: Duplicate entry '1' for key 'abc'
explain select * from t1 where abc=15;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc	abc	9	const	1	
select * from t1 where abc= 15;
abc	xyz
15	61
explain select * from t1 where abc=15 and xyz =61;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc	abc	9	const	1	
select * from t1 where abc= 15 and 61;
abc	xyz
15	61
# now xyz has different value
explain select * from t1 where abc=1000;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	NULL	NULL	NULL	NULL	NULL	NULL	NULL	Impossible WHERE noticed after reading const tables
select * from t1 where abc= 1000;
abc	xyz
explain select * from t1 where abc=14 and xyz =56;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	NULL	NULL	NULL	NULL	NULL	NULL	NULL	Impossible WHERE noticed after reading const tables
select * from t1 where abc=14 and xyz =56;
abc	xyz
#range query
explain select * from t1 where abc >5 limit 1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	16	Using where
select * from t1 where abc >5 limit 1;
abc	xyz
11	11
explain select * from t1 where abc=5 and xyz <56;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc	abc	9	const	1	
select * from t1 where abc=5 and xyz <56;
abc	xyz
5	6
explain select * from t1 where abc>=5 and xyz <56;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	16	Using where
select * from t1 where abc>=5 and xyz <56;
abc	xyz
5	6
11	11
12	11
31	31
14	1
explain select * from t1 where abc>5 and xyz =56;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	16	Using where
select * from t1 where abc>5 and xyz =56;
abc	xyz
drop table t1;
create table t1(abc blob unique, xyz blob unique );
insert into t1 values(1,1),(2,11),(3,31),(4,12),(5,63),(NULL,2),(NULL,NULL),
(91,19),(92,119),(93,391),(94,192),(95,693);
insert into t1 value(1,NULL);
ERROR 23000: Duplicate entry '1' for key 'abc'
explain select * from t1 where abc=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc	abc	9	const	1	
select * from t1 where abc=1;
abc	xyz
1	1
explain select * from t1 where xyz=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	xyz	xyz	9	const	1	
select * from t1 where xyz=1;
abc	xyz
1	1
explain select * from t1 where abc=5 and xyz=63;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc	abc	9	const	1	
select * from t1 where abc=5 and xyz=63;
abc	xyz
5	63
explain select * from t1 where xyz=63 and abc=5;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc	abc	9	const	1	
select * from t1 where xyz=63 and abc=5;
abc	xyz
5	63
explain select * from t1 where xyz=63 or abc=5;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	12	Using where
select * from t1 where xyz=63 or abc=5;
abc	xyz
5	63
# now the first one does not exist 
explain select * from t1 where abc=51 and xyz=63;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	NULL	NULL	NULL	NULL	NULL	NULL	NULL	Impossible WHERE noticed after reading const tables
select * from t1 where abc=51 and xyz=63;
abc	xyz
# now the second one does not exist 
explain select * from t1 where abc=5 and xyz=613;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	NULL	NULL	NULL	NULL	NULL	NULL	NULL	Impossible WHERE noticed after reading const tables
select * from t1 where abc=5 and xyz=613;
abc	xyz
explain select * from t1 where abc is NULL;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	12	Using where
select * from t1 where abc is NULL;
abc	xyz
NULL	2
NULL	NULL
explain select * from t1 where abc is NULL and xyz=2;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	xyz	xyz	9	const	1	
select * from t1 where abc is NULL and xyz=2;
abc	xyz
NULL	2
#range conditions
explain select * from t1 where abc>11 limit 5;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	12	Using where
select * from t1 where abc>11 limit 5;
abc	xyz
91	19
92	119
93	391
94	192
95	693
explain select * from t1 where xyz<11;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	12	Using where
select * from t1 where xyz<11;
abc	xyz
1	1
NULL	2
explain select * from t1 where abc>=51 and xyz<=63;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	12	Using where
select * from t1 where abc>=51 and xyz<=63;
abc	xyz
91	19
explain select * from t1 where abc>5 and xyz<613;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	12	Using where
select * from t1 where abc>5 and xyz<613;
abc	xyz
91	19
92	119
93	391
94	192
explain select * from t1 where abc=5 and xyz>1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	abc	abc	9	const	1	
select * from t1 where abc=5 and xyz>1;
abc	xyz
5	63
explain select * from t1 where abc<55 and xyz=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	xyz	xyz	9	const	1	
select * from t1 where abc<55 and xyz=1;
abc	xyz
1	1
explain select * from t1 where abc<=55 or xyz>=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	12	Using where
select * from t1 where abc<=55 and xyz>=1;
abc	xyz
1	1
2	11
3	31
4	12
5	63
drop table t1;
#now the unique (a,b,c..........)
#let us do more hard test by using unique(a,b,c,d) key first 
create table t1 (a blob , b blob , c blob , d blob ,unique(a,b,c,d),
unique(a,b,c) ,unique (b,c,d));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` blob DEFAULT NULL,
  `b` blob DEFAULT NULL,
  `c` blob DEFAULT NULL,
  `d` blob DEFAULT NULL,
  UNIQUE KEY `a_b_c_d`(`a`,`b`,`c`,`d`),
  UNIQUE KEY `a_b_c`(`a`,`b`,`c`),
  UNIQUE KEY `b_c_d`(`b`,`c`,`d`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1
insert into t1 values(1,1,1,1),(2,1,2,1),(1,3,3,1),(4,1,4,1),(1,5,1,5),
(6,1,6,1),(1,7,1,7),(8,1,1,8),(1,9,9,1),(2,2,2,2),(4,4,4,4),(5,5,5,5),(6,6,6,6),
(126,216,603,640),(603,460,660,706),(806,609,609,605),(62,62,22,33),(64,65,66,76),
(16,26,63,64),(63,46,66,76),(86,69,69,65),(622,622,622,633),(644,655,666,776);
select * from t1 limit 3;
a	b	c	d
1	1	1	1
2	1	2	1
1	3	3	1
#simple where
#key (a,b,c)
explain  select * from t1 where a=1 and b=1 and c=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	a_b_c	a_b_c	9	const	1	
select * from t1 where a=1 and b=1 and c=1;
a	b	c	d
1	1	1	1
explain  select * from t1 where a=1 and b=4444 and c=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	NULL	NULL	NULL	NULL	NULL	NULL	NULL	Impossible WHERE noticed after reading const tables
select * from t1 where a=1 and b=4444 and c=1;
a	b	c	d
#incomplete key
explain  select * from t1 where a=1 and c=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	23	Using where
select * from t1 where a=1 and c=1;
a	b	c	d
1	1	1	1
1	5	1	5
1	7	1	7
explain  select * from t1 where a=1 and b=4444 ;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	23	Using where
select * from t1 where a=1 and b=4444 ;
a	b	c	d
explain  select * from t1 where b=1 and c=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	23	Using where
select * from t1 where b=1 and c=1;
a	b	c	d
1	1	1	1
8	1	1	8
#key (b,c,d)
explain  select * from t1 where d=1 and b=1 and c=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	b_c_d	b_c_d	9	const	1	
select * from t1 where d=1 and b=1 and c=1;
a	b	c	d
1	1	1	1
explain  select * from t1 where d=1 and b=4444 and c=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	NULL	NULL	NULL	NULL	NULL	NULL	NULL	Impossible WHERE noticed after reading const tables
select * from t1 where d=1 and b=4444 and c=1;
a	b	c	d
#incomplete key
explain  select * from t1 where d=1 and c=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	23	Using where
select * from t1 where d=1 and c=1;
a	b	c	d
1	1	1	1
explain  select * from t1 where d=1 and b=4444 ;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	23	Using where
select * from t1 where d=1 and b=4444 ;
a	b	c	d
explain  select * from t1 where b=1 and c=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	23	Using where
select * from t1 where b=1 and c=1;
a	b	c	d
1	1	1	1
8	1	1	8
#key (a,b,c,d)
explain  select * from t1 where a=1 and d=1 and b=1 and c=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	a_b_c_d	a_b_c_d	9	const	1	
select * from t1 where a=1 and d=1 and b=1 and c=1;
a	b	c	d
1	1	1	1
explain  select * from t1 where a=1 and d=1 and b=4444 and c=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	NULL	NULL	NULL	NULL	NULL	NULL	NULL	Impossible WHERE noticed after reading const tables
select * from t1 where a=1 and d=1 and b=4444 and c=1;
a	b	c	d
#incomplete key
explain  select * from t1 where a=1 and d=1 and c=1 ;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	23	Using where
select * from t1 where a=1 and d=1 and c=1 ;
a	b	c	d
1	1	1	1
explain  select * from t1 where d=1 and b=4444 and a=1 ;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	23	Using where
select * from t1 where d=1 and b=4444 and a=1 ;
a	b	c	d
explain  select * from t1 where a=1 and c=1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	23	Using where
select * from t1 where a=1 and c=1;
a	b	c	d
1	1	1	1
1	5	1	5
1	7	1	7
drop table t1;
