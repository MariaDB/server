include/master-slave.inc
[connection master]
connection slave;
CHANGE MASTER TO MASTER_CONNECT_RETRY= 1;
include/start_slave.inc
SET @saved_dbug= @@GLOBAL.debug_dbug;
SET @@GLOBAL.debug_dbug= '+d,sync_master_retry';
include/rpl_stop_server.inc [server_number=1]
SET @@SESSION.debug_sync= 'now WAIT_FOR master_retry_sleep';
include/wait_for_slave_param.inc [Slave_IO_Running]
SET @@SESSION.debug_sync= 'now SIGNAL master_retry_continue';
SET @@SESSION.debug_sync= 'now WAIT_FOR master_retry_sleep';
include/wait_for_slave_param.inc [Slave_IO_Running]
SET @@SESSION.debug_sync= 'now SIGNAL master_retry_continue';
SET @@SESSION.debug_sync= 'now WAIT_FOR master_retry_sleep';
include/wait_for_slave_param.inc [Slave_IO_Running]
SET @@SESSION.debug_sync= 'now SIGNAL master_retry_continue';
Slave_IO_Running status should be No
include/wait_for_slave_param.inc [Slave_IO_Running]
SET @@GLOBAL.debug_dbug= @saved_dbug;
include/rpl_start_server.inc [server_number=1]
connection slave;
START SLAVE;
include/wait_for_slave_io_to_start.inc
include/rpl_end.inc
