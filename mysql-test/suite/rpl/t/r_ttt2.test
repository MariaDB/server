--source include/have_binlog_format_row.inc
--source include/have_innodb.inc
--source include/master-slave.inc

--connection slave
stop slave;
SET GLOBAL slave_parallel_threads=10;
set global slave_parallel_mode=optimistic;
start slave;


--connection master
create table t1( a int primary key, b int) engine=innodb;
create table t2( a int primary key, b int) engine=innodb;
connect (con1,localhost,root,,);
connect (con2,localhost,root,,);
--connection con1
--send alter table t1 add column c int, force, algorithm=inplace;
#--connection con2
#--send alter table t2 add column c int, force, algorithm=inplace;

#--connection con1
#--reap
#--connection con2
#--reap
#create table t3( a int primary key, b int) engine=innodb;

#show binlog events;

--sleep 5
--connection slave
stop slave;
show create table t1;
#--sleep 30
#show binlog events;
--sleep 60000

--connection master
drop table t1,t2;

--connection slave
stop slave;
SET GLOBAL slave_parallel_threads=0;
set global slave_parallel_mode=conservative;
start slave;
--source include/rpl_end.inc
