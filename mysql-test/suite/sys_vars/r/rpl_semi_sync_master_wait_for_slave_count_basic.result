# MDEV-18983: @@rpl_semi_sync_master_wait_for_slave_count basic test
# GLOBAL scope
SET @orig= @@GLOBAL.rpl_semi_sync_master_wait_for_slave_count;
SELECT @orig;
@orig
10
SELECT @@rpl_semi_sync_master_wait_for_slave_count;
@@rpl_semi_sync_master_wait_for_slave_count
10
# Read-Write
SET @@GLOBAL.rpl_semi_sync_master_wait_for_slave_count= 11;
SELECT @@GLOBAL.rpl_semi_sync_master_wait_for_slave_count;
@@GLOBAL.rpl_semi_sync_master_wait_for_slave_count
11
# DEFAULT
SET @@GLOBAL.rpl_semi_sync_master_wait_for_slave_count= DEFAULT;
SELECT @@GLOBAL.rpl_semi_sync_master_wait_for_slave_count;
@@GLOBAL.rpl_semi_sync_master_wait_for_slave_count
1
# Not SESSION scope
SELECT @@SESSION.rpl_semi_sync_master_wait_for_slave_count;
ERROR HY000: Variable 'rpl_semi_sync_master_wait_for_slave_count' is a GLOBAL variable
SET @@SESSION.rpl_semi_sync_master_wait_for_slave_count= 12;
ERROR HY000: Variable 'rpl_semi_sync_master_wait_for_slave_count' is a GLOBAL variable and should be set with SET GLOBAL
# Range
SET @@GLOBAL.rpl_semi_sync_master_wait_for_slave_count= 65536;
Warnings:
Warning	1292	Truncated incorrect rpl_semi_sync_master_wait_for... value: '65536'
SELECT @@GLOBAL.rpl_semi_sync_master_wait_for_slave_count;
@@GLOBAL.rpl_semi_sync_master_wait_for_slave_count
65535
SET @@GLOBAL.rpl_semi_sync_master_wait_for_slave_count= 0;
Warnings:
Warning	1292	Truncated incorrect rpl_semi_sync_master_wait_for... value: '0'
SELECT @@GLOBAL.rpl_semi_sync_master_wait_for_slave_count;
@@GLOBAL.rpl_semi_sync_master_wait_for_slave_count
1
# Type
SET @@GLOBAL.rpl_semi_sync_master_wait_for_slave_count= 13.0;
ERROR 42000: Incorrect argument type to variable 'rpl_semi_sync_master_wait_for_slave_count'
SET @@GLOBAL.rpl_semi_sync_master_wait_for_slave_count= 'strikes of the clock';
ERROR 42000: Incorrect argument type to variable 'rpl_semi_sync_master_wait_for_slave_count'
# Cleanup
SET @@GLOBAL.rpl_semi_sync_master_wait_for_slave_count= @orig;
