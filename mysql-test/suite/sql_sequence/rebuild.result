#
# MDEV-15977 Assertion `! thd->in_sub_stmt' failed in trans_commit_stmt
#
CREATE SEQUENCE s1 ENGINE=InnoDB;
ALTER TABLE s1 FORCE;
CREATE TABLE t1 (a INT) ENGINE=MyISAM;
CREATE TABLE t2 (b VARCHAR(64)) ENGINE=MyISAM;
CREATE TRIGGER tr1 BEFORE INSERT ON t1 FOR EACH ROW INSERT INTO t2 SELECT TABLE_NAME FROM INFORMATION_SCHEMA.PARTITIONS WHERE TABLE_SCHEMA='test';
INSERT INTO t1 VALUES (1);
select * from t1;
a
1
select * from t2;
b
s1
t1
t2
DROP TABLE t1, t2, s1;
