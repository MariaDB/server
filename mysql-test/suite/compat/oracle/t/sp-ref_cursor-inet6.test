SET sql_mode=ORACLE;

--echo #
--echo # MDEV-10152 Add support for TYPE .. IS REF CURSOR
--echo #

CREATE TABLE t1 (a INT, b INET6);
INSERT INTO t1 VALUES (1,'::1');
DELIMITER $$;
CREATE PROCEDURE p1 IS
  TYPE rec_t IS RECORD (a INT, b INET6);
  TYPE cur_t IS REF CURSOR RETURN rec_t;
  c0 cur_t;
  v0 t1%ROWTYPE;
BEGIN
  OPEN c0 FOR SELECT * FROM t1;
  FETCH c0 INTO v0;
  CLOSE c0;
  SELECT v0.a, v0.b;
END;
$$
DELIMITER ;$$
CALL p1;
DROP PROCEDURE p1;
DROP TABLE t1;
