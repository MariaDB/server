# Errors detected during CREATE time
# Related to wrong data types in OPEN

SET sql_mode=ORACLE;

--echo #
--echo # MDEV-10152 Add support for TYPE .. IS REF CURSOR
--echo #

DELIMITER $$;
--error ER_ILLEGAL_PARAMETER_DATA_TYPES2_FOR_OPERATION
CREATE PROCEDURE p1 IS
  TYPE rec_t IS RECORD (a INT, b VARCHAR(10));
  TYPE cur_t IS REF CURSOR RETURN rec_t;
  c0 cur_t;
BEGIN
  OPEN c0 FOR SELECT 1,2,3 FROM DUAL;
END;
$$
DELIMITER ;$$


DELIMITER $$;
--error ER_ILLEGAL_PARAMETER_DATA_TYPES2_FOR_OPERATION
CREATE PROCEDURE p1 IS
  TYPE rec_t IS RECORD (a INT, b VARCHAR(10), c INT);
  TYPE cur_t IS REF CURSOR RETURN rec_t;
  c0 cur_t;
BEGIN
  OPEN c0 FOR SELECT 1,2 FROM DUAL;
END;
$$
DELIMITER ;$$
