--let $saved_binlog_row_image= `SELECT @@binlog_row_image`

#
# Verify flashback works well when binlog_row_image is set to FULL mode
# In this mode, both before image and after image includes all columns.
# changed row.
#
# flashback should swap after image and before image.
#
SET binlog_row_image= FULL;
--source suite/binlog/include/flashback.test

#
# Verify flashback works well when binlog_row_image is set to FULL_NODUP mode
# In this mode, before image is full and after image includes only changed row.
#
# flashback should swap the changed columns from after image to before image.
# null bits should be updated if there is any columns is NULL.
#
SET binlog_row_image= FULL_NODUP;
--source suite/binlog/include/flashback.test

eval SET binlog_row_image= $saved_binlog_row_image;

## Clear
SET binlog_format=statement;
--error ER_FLASHBACK_NOT_SUPPORTED
SET GLOBAL binlog_format=statement;
