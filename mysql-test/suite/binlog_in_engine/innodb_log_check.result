*** Test that binlogging throttles large writes, waiting for InnoDB checkpoints as needed
CREATE TABLE t1 (a INT, b INT, c LONGTEXT, PRIMARY KEY(a, b)) ENGINE=InnoDB;
SET @old_max_packet= @@GLOBAL.max_allowed_packet;
SET GLOBAL max_allowed_packet=128*1024*1024;
SET @old_max_binlog= @@GLOBAL.max_binlog_size;
SET GLOBAL max_binlog_size= 16*1024*1024;
connect  con1,localhost,root;
INSERT INTO t1 VALUES (1, 1, REPEAT('x', 64*1024*1024));
disconnect con1;
connection default;
SELECT a, b, LENGTH(c) FROM t1 ORDER BY a, b;
a	b	LENGTH(c)
1	1	67108864
SET GLOBAL max_allowed_packet= @old_max_packet;
SET GLOBAL max_binlog_size= @old_max_binlog;
DROP TABLE t1;
