--source include/have_binlog_format_mixed.inc
--source include/have_innodb_binlog.inc

--error ER_ENGINE_BINLOG_NO_SEMISYNC
SET GLOBAL rpl_semi_sync_master_enabled= 1;

CREATE TABLE t1 (a INT PRIMARY KEY, b INT) ENGINE=InnoDB;
--error ER_ENGINE_BINLOG_NO_USER_XA
XA START 'a';
INSERT INTO t1 VALUES (0, 0);
--error ER_XAER_RMFAIL
XA END 'a';
--error ER_XAER_RMFAIL
XA PREPARE 'a';
--error ER_XAER_NOTA
XA COMMIT 'a';
DROP TABLE t1;
