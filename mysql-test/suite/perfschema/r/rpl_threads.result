include/master-slave.inc
[connection master]
drop table if exists test.t1;
connection slave;
reset master;
create table test.t1(a int);
drop table test.t1;
include/show_binlog_events.inc
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
slave-bin.000001	#	Gtid	#	#	GTID #-#-#
slave-bin.000001	#	Query	#	#	use `test`; create table test.t1(a int)
slave-bin.000001	#	Gtid	#	#	GTID #-#-#
slave-bin.000001	#	Query	#	#	use `test`; DROP TABLE `t1` /* generated by server */
connection master;
"============ Performance schema on master ============"
select ID from INFORMATION_SCHEMA.PROCESSLIST
where COMMAND = "Binlog Dump"
  into @master_dump_pid;
Warnings:
Warning	1287	'<select expression> INTO <destination>;' is deprecated and will be removed in a future release. Please use 'SELECT <select list> INTO <destination> FROM...' instead
select COMMAND, STATE
from INFORMATION_SCHEMA.PROCESSLIST
where ID = @master_dump_pid;
COMMAND	STATE
Binlog Dump	Master has sent all binlog to slave; waiting for more updates
select NAME, TYPE, PROCESSLIST_COMMAND, PROCESSLIST_STATE
from performance_schema.threads
where PROCESSLIST_ID = @master_dump_pid;
NAME	TYPE	PROCESSLIST_COMMAND	PROCESSLIST_STATE
thread/sql/one_connection	FOREGROUND	Binlog Dump	Master has sent all binlog to slave; waiting for more updates
connection slave;
"============ Performance schema on slave ============"
select ID from INFORMATION_SCHEMA.PROCESSLIST
where STATE like "Waiting for master to send event%"
  into @slave_io_pid;
Warnings:
Warning	1287	'<select expression> INTO <destination>;' is deprecated and will be removed in a future release. Please use 'SELECT <select list> INTO <destination> FROM...' instead
select COMMAND, STATE
from INFORMATION_SCHEMA.PROCESSLIST
where ID = @slave_io_pid;
COMMAND	STATE
Slave_IO	Waiting for master to send event
select NAME, TYPE, PROCESSLIST_COMMAND, PROCESSLIST_STATE
from performance_schema.threads
where PROCESSLIST_ID = @slave_io_pid;
NAME	TYPE	PROCESSLIST_COMMAND	PROCESSLIST_STATE
select ID from INFORMATION_SCHEMA.PROCESSLIST
where STATE like "Slave has read all relay log%"
  into @slave_sql_pid;
Warnings:
Warning	1287	'<select expression> INTO <destination>;' is deprecated and will be removed in a future release. Please use 'SELECT <select list> INTO <destination> FROM...' instead
select COMMAND, STATE
from INFORMATION_SCHEMA.PROCESSLIST
where ID = @slave_sql_pid;
COMMAND	STATE
Slave_SQL	Slave has read all relay log; waiting for more updates
select NAME, TYPE, PROCESSLIST_COMMAND, PROCESSLIST_STATE
from performance_schema.threads
where PROCESSLIST_ID = @slave_sql_pid;
NAME	TYPE	PROCESSLIST_COMMAND	PROCESSLIST_STATE
include/rpl_end.inc
