MariaDB frm parser test - Index Types
Testing various index types and configurations
CREATE TABLE t_btree_indexes (
id INT PRIMARY KEY,
name VARCHAR(100),
email VARCHAR(100),
age INT,
score DECIMAL(5,2),
INDEX idx_name (name) USING BTREE,
UNIQUE KEY idx_email (email) USING BTREE,
INDEX idx_age_score (age, score) USING BTREE
);
CREATE TABLE `t_btree_indexes` (
  `id` int(11) NOT NULL,
  `name` varchar(100) DEFAULT NULL,
  `email` varchar(100) DEFAULT NULL,
  `age` int(11) DEFAULT NULL,
  `score` decimal(5,2) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_email` (`email`) USING BTREE,
  KEY `idx_name` (`name`) USING BTREE,
  KEY `idx_age_score` (`age`,`score`) USING BTREE
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci
DROP TABLE t_btree_indexes;
CREATE TABLE t_hash_indexes (
id INT,
code VARCHAR(10),
category VARCHAR(20),
INDEX idx_code (code) USING HASH,
INDEX idx_category (category) USING HASH
) ENGINE=MEMORY;
CREATE TABLE `t_hash_indexes` (
  `id` int(11) DEFAULT NULL,
  `code` varchar(10) DEFAULT NULL,
  `category` varchar(20) DEFAULT NULL,
  KEY `idx_code` (`code`) USING HASH,
  KEY `idx_category` (`category`) USING HASH
) ENGINE=MEMORY DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci
DROP TABLE t_hash_indexes;
CREATE TABLE t_compound_pk (
tenant_id INT,
user_id INT,
name VARCHAR(50),
PRIMARY KEY (tenant_id, user_id),
INDEX idx_name (name)
);
CREATE TABLE `t_compound_pk` (
  `tenant_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `name` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`tenant_id`,`user_id`),
  KEY `idx_name` (`name`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci
DROP TABLE t_compound_pk;
CREATE TABLE t_index_options (
id INT AUTO_INCREMENT,
title VARCHAR(200),
content TEXT,
status TINYINT,
created_at DATETIME,
PRIMARY KEY (id),
INDEX idx_title_partial (title(50)),
INDEX idx_status_created (status, created_at),
FULLTEXT KEY ft_content (content)
);
CREATE TABLE `t_index_options` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(200) DEFAULT NULL,
  `content` text DEFAULT NULL,
  `status` tinyint(4) DEFAULT NULL,
  `created_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_title_partial` (`title`(50)),
  KEY `idx_status_created` (`status`,`created_at`),
  FULLTEXT KEY `ft_content` (`content`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci
DROP TABLE t_index_options;
CREATE TABLE t_spatial_indexes (
id INT AUTO_INCREMENT PRIMARY KEY,
name VARCHAR(100),
location POINT NOT NULL,
area POLYGON NOT NULL,
SPATIAL INDEX idx_location (location),
SPATIAL INDEX idx_area (area)
) ENGINE=MyISAM;
CREATE TABLE `t_spatial_indexes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) DEFAULT NULL,
  `location` point NOT NULL,
  `area` polygon NOT NULL,
  PRIMARY KEY (`id`),
  SPATIAL KEY `idx_location` (`location`),
  SPATIAL KEY `idx_area` (`area`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci
DROP TABLE t_spatial_indexes;
CREATE TABLE t_unique_indexes (
id INT,
username VARCHAR(50),
email VARCHAR(100),
phone VARCHAR(20),
ssn VARCHAR(11),
UNIQUE KEY idx_username (username),
UNIQUE KEY idx_email (email),
UNIQUE KEY idx_phone_ssn (phone, ssn),
INDEX idx_id (id)
);
CREATE TABLE `t_unique_indexes` (
  `id` int(11) DEFAULT NULL,
  `username` varchar(50) DEFAULT NULL,
  `email` varchar(100) DEFAULT NULL,
  `phone` varchar(20) DEFAULT NULL,
  `ssn` varchar(11) DEFAULT NULL,
  UNIQUE KEY `idx_username` (`username`),
  UNIQUE KEY `idx_email` (`email`),
  UNIQUE KEY `idx_phone_ssn` (`phone`,`ssn`),
  KEY `idx_id` (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci
DROP TABLE t_unique_indexes;
CREATE TABLE t_desc_indexes (
id INT,
created_at TIMESTAMP,
priority INT,
INDEX idx_created_desc (created_at DESC),
INDEX idx_priority_created (priority ASC, created_at DESC)
);
CREATE TABLE `t_desc_indexes` (
  `id` int(11) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `priority` int(11) DEFAULT NULL,
  KEY `idx_created_desc` (`created_at` DESC),
  KEY `idx_priority_created` (`priority`,`created_at` DESC)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci
DROP TABLE t_desc_indexes;
CREATE TABLE t_ignored_indexes (
id INT,
name VARCHAR(100),
status INT,
INDEX idx_name (name),
INDEX idx_status (status) IGNORED
);
CREATE TABLE `t_ignored_indexes` (
  `id` int(11) DEFAULT NULL,
  `name` varchar(100) DEFAULT NULL,
  `status` int(11) DEFAULT NULL,
  KEY `idx_name` (`name`),
  KEY `idx_status` (`status`) IGNORED
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_uca1400_ai_ci
DROP TABLE t_ignored_indexes;
Index types test completed
