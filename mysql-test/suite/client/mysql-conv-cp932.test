--character_set cp932

# simple I/O
--exec echo "‘ªŽŽŽ‘—¿" | $MYSQL_CONV -f cp932 -t filename
--exec echo "@6e2c@8a66@8cc7@6599@5eab" | $MYSQL_CONV -f filename -t cp932

# undo query result
SET NAMES cp932;
--let $query_result=`SELECT CONVERT(CONVERT('‘ªŽŽŽ‘—¿' USING filename) USING binary);`
--echo $query_result
--exec echo $query_result | $MYSQL_CONV -f filename -t cp932

--let $reverse_query_result=`SELECT CONVERT(_filename '@6e2c@8a66@8cc7@6599@5eab' USING cp932);`
--echo $reverse_query_result
--exec echo $reverse_query_result | $MYSQL_CONV -f cp932 -t filename

# bulk convert with pipe
--disable_warnings
DROP TABLE IF EXISTS ‘ªŽŽŽ‘—¿,‘ªŽŽŽ‘—¿2;
--enable_warnings
CREATE TABLE ‘ªŽŽŽ‘—¿ (foo INT);
CREATE TABLE ‘ªŽŽŽ‘—¿2 (bar INT);
--let $MYSQLD_DATADIR= `select @@datadir`
--exec cd $MYSQLD_DATADIR && ls test/*.frm | sed -e s/\\./@002e/g -e s/\\//@002f/g | $MYSQL_CONV -f filename -t cp932
--exec cd $MYSQLD_DATADIR && ls test/*.frm | $MYSQL_CONV -f filename -t cp932 -c
--error 1
--exec cd $MYSQLD_DATADIR && ls test/*.frm | $MYSQL_CONV -f filename -t cp932
DROP TABLE ‘ªŽŽŽ‘—¿,‘ªŽŽŽ‘—¿2;

# bulk convert with file
--write_file $MYSQL_TMP_DIR/mysql-conv-test-cp932.txt
EOF
--exec $MYSQL_CONV -f cp932 -t filename $MYSQL_TMP_DIR/mysql-conv-test-cp932.txt

--append_file $MYSQL_TMP_DIR/mysql-conv-test-cp932.txt

EOF
--exec $MYSQL_CONV -f cp932 -t filename $MYSQL_TMP_DIR/mysql-conv-test-cp932.txt

--append_file $MYSQL_TMP_DIR/mysql-conv-test-cp932.txt
‘ªŽŽŽ‘—¿
EOF
--exec $MYSQL_CONV -f cp932 -t filename $MYSQL_TMP_DIR/mysql-conv-test-cp932.txt

--append_file $MYSQL_TMP_DIR/mysql-conv-test-cp932.txt
‘ªŽŽŽ‘—¿2
EOF
--exec $MYSQL_CONV -f cp932 -t filename $MYSQL_TMP_DIR/mysql-conv-test-cp932.txt

--copy_file $MYSQL_TMP_DIR/mysql-conv-test-cp932.txt $MYSQL_TMP_DIR/mysql-conv-test-cp932-2.txt
--exec $MYSQL_CONV -f cp932 -t filename $MYSQL_TMP_DIR/mysql-conv-test-cp932.txt $MYSQL_TMP_DIR/mysql-conv-test-cp932-2.txt

--remove_file $MYSQL_TMP_DIR/mysql-conv-test-cp932.txt
--remove_file $MYSQL_TMP_DIR/mysql-conv-test-cp932-2.txt
