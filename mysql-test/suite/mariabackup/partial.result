CREATE TABLE t1(i INT) ENGINE INNODB;
INSERT INTO t1 VALUES(1);
CREATE TABLE t21(i INT) ENGINE INNODB;
INSERT INTO t21 VALUES(1);
CREATE TABLE t2(i int) ENGINE INNODB;
# xtrabackup backup
t1.new
t21.new
# xtrabackup prepare
t1.cfg
t21.cfg
ALTER TABLE t1 DISCARD TABLESPACE;
ALTER TABLE t1 IMPORT TABLESPACE;
SELECT * FROM t1;
i
1
# MDEV-33023 Crash in mariadb-backup --prepare --export after --prepare
t1.cfg
t21.cfg
ALTER TABLE t1 DISCARD TABLESPACE;
ALTER TABLE t1 IMPORT TABLESPACE;
SELECT * FROM t1;
i
1
DROP TABLE t1;
DROP TABLE t2;
DROP TABLE t21;
#
# MDEV-36287 maribackup ignores tables-file option
#
CREATE TABLE t1(f1 INT NOT NULL)ENGINE=InnoDB;
CREATE TABLE t2(f1 INT NOT NULL)ENGINE=InnoDB;
INSERT INTO t1 values(1);
# Only backup table t1 by creating tables_file
# Backup with --tables-file option
# table t2 is skipped. Shows only t1
t1.frm
t1.new
DROP TABLE t2, t1;
