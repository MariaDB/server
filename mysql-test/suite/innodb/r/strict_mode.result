#
# Bug #17852083 PRINT A WARNING WHEN DDL HAS AN ERROR IN
# INNODB_STRICT_MODE = 1
#
call mtr.add_suppression("InnoDB: Cannot add field .* in table .* because after adding it, the row size is .* which is greater than maximum allowed size (.*) for a record on index leaf page.");
set innodb_strict_mode = 0;
create table t1 (id int auto_increment primary key,
v varchar(32),
col1 text,
col2 text,
col3 text,
col4 text,
col5 text,
col6 text,
col7 text,
col8 text,
col9 text,
col10 text,
col11 text,
col12 text,
col13 text,
col14 text,
col15 text,
col16 text,
col17 text,
col18 text,
col19 text,
col20 text,
col21 text,
col22 text,
col23 text,
col24 text,
col25 text,
col26 text,
col27 text,
col28 text,
col29 text,
col30 text,
col31 text,
col32 text,
col33 text,
col34 text,
col35 text,
col36 text,
col37 text,
col38 text,
col39 text,
col40 text,
col41 text,
col42 text,
col43 text,
col44 text,
col45 text ,
col46 text,
col47 text,
col48 text,
col49 text,
col50 text,
col51 text,
col52 text,
col53 text,
col54 text,
col55 text,
col56 text,
col57 text,
col58 text,
col59 text,
col60 text,
col61 text,
col62 text,
col63 text,
col64 text,
col65 text,
col66 text,
col67 text,
col68 text ,
col69 text,
col70 text,
col71 text,
col72 text,
col73 text,
col74 text,
col75 text,
col76 text,
col77 text,
col78 text,
col79 text,
col80 text,
col81 text,
col82 text,
col83 text,
col84 text,
col85 text,
col86 text,
col87 text,
col88 text,
col89 text,
col90 text,
col91 text,
col92 text,
col93 text,
col94 text,
col95 text,
col96 text,
col97 text,
col98 text,
col99 text,
col100 text,
col101 text,
col102 text,
col103 text,
col104 text,
col105 text,
col106 text,
col107 text,
col108 text,
col109 text,
col110 text,
col111 text,
col112 text,
col113 text,
col114 text,
col115 text,
col116 text,
col117 text,
col118 text,
col119 text,
col120 text,
col121 text,
col122 text,
col123 text,
col124 text,
col125 text,
col126 text ,
col127 text,
col128 text,
col129 text,
col130 text,
col131 text,
col132 text,
col133 text,
col134 text,
col135 text,
col136 text,
col137 text,
col138 text,
col139 text,
col140 text,
col141 text,
col142 text,
col143 text,
col144 text,
col145 text,
col146 text,
col147 text ,
col148 text,
col149 text,
col150 text,
col151 text,
col152 text,
col153 text,
col154 text,
col155 text,
col156 text,
col157 text,
col158 text,
col159 text,
col160 text,
col161 text,
col162 text,
col163 text,
col164 text,
col165 text,
col166 text,
col167 text,
col168 text,
col169 text,
col170 text,
col171 text,
col172 text ,
col173 text,
col174 text,
col175 text,
col176 text,
col177 text,
col178 text,
col179 text,
col180 text,
col181 text,
col182 text,
col183 text,
col184 text,
col185 text,
col186 text,
col187 text,
col188 text,
col189 text,
col190 text,
col191 text,
col192 text,
col193 text,
col194 text,
col195 text,
col196 text,
col197 text,
col198 text,
col199 text,
col200 text,
col201 text,
col202 text,
col203 text,
col204 text,
col205 text,
col206 text,
col207 text,
col208 text,
col209 text,
col210 text,
col211 text,
col212 text,
col213 text,
col214 text,
col215 text,
col216 text,
col217 text,
col218 text,
col219 text,
col220 text,
col221 text,
col222 text,
col223 text,
col224 text,
col225 text,
col226 text,
col227 text,
col228 text,
col229 text,
col230 text,
col231 text,
col232 text,
col233 text,
col234 text,
col235 text,
col236 text,
col237 text,
col238 text,
col239 text,
col240 text,
col241 text,
col242 text,
col243 text,
col244 text,
col245 text,
col246 text,
col247 text,
col248 text,
col249 text,
col250 text,
col251 text,
col252 text,
col253 text,
col254 text,
col255 text,
col256 text,
col257 text,
col258 text,
col259 text,
col260 text,
col261 text,
col262 text,
col263 text,
col264 text,
col265 text,
col266 text,
col267 text,
col268 text,
col269 text,
col270 text,
col271 text,
col272 text,
col273 text,
col274 text,
col275 text,
col276 text,
col277 text,
col278 text,
col279 text,
col280 text,
col281 text,
col282 text,
col283 text,
col284 text,
col285 text,
col286 text,
col287 text,
col288 text,
col289 text,
col290 text,
col291 text,
col292 text,
col293 text,
col294 text,
col295 text,
col296 text,
col297 text,
col298 text,
col299 text,
col300 text,
col301 text,
col302 text,
col303 text,
col304 text,
col305 text,
col306 text,
col307 text,
col308 text,
col309 text,
col310 text,
col311 text,
col312 text,
col313 text,
col314 text,
col315 text,
col316 text,
col317 text,
col318 text,
col319 text,
col320 text,
col321 text,
col322 text,
col323 text,
col324 text,
col325 text,
col326 text,
col327 text,
col328 text,
col329 text,
col330 text,
col331 text,
col332 text,
col333 text,
col334 text,
col335 text,
col336 text,
col337 text,
col338 text,
col339 text,
col340 text,
col341 text,
col342 text,
col343 text,
col344 text,
col345 text,
col346 text,
col347 text,
col348 text,
col349 text,
col350 text,
col351 text,
col352 text,
col353 text,
col354 text,
col355 text,
col356 text,
col357 text,
col358 text,
col359 text,
col360 text,
col361 text,
col362 text,
col363 text,
col364 text,
col365 text,
col366 text,
col367 text,
col368 text,
col369 text,
col370 text,
col371 text,
col372 text,
col373 text,
col374 text,
col375 text,
col376 text,
col377 text,
col378 text,
col379 text,
col380 text,
col381 text,
col382 text,
col383 text
) ENGINE=InnoDB;
Warnings:
Warning	139	Row size too large (> 8126). Changing some columns to TEXT or BLOB may help. In current row format, BLOB prefix of 0 bytes is stored inline.
set innodb_strict_mode = 1;
alter table t1 engine=InnoDB;
ERROR 42000: Row size too large. The maximum row size for the used table type, not counting BLOBs, is 8126. This includes storage overhead, check the manual. You have to change some columns to TEXT or BLOBs
drop table t1;
