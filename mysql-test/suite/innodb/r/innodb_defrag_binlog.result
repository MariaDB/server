include/master-slave.inc
[connection master]
drop table if exists t1;
create table t1(a int not null primary key auto_increment, b varchar(256), key second(b)) engine=innodb;
insert into t1 values (1, REPEAT("a", 256));
insert into t1 values (2, REPEAT("a", 256));
optimize table t1;
Table	Op	Msg_type	Msg_text
test.t1	optimize	status	OK
drop table t1;
show binlog events in 'master-bin.000001' from 313;
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
master-bin.000001	313	Gtid	1	351	GTID 0-1-1
master-bin.000001	351	Query	1	465	use `test`; DROP TABLE IF EXISTS `t1` 
master-bin.000001	465	Gtid	1	503	GTID 0-1-2
master-bin.000001	503	Query	1	669	use `test`; create table t1(a int not null primary key auto_increment, b varchar(256), key second(b)) engine=innodb
master-bin.000001	669	Gtid	1	707	BEGIN GTID 0-1-3
master-bin.000001	707	Table_map	1	751	table_id: 82 (test.t1)
master-bin.000001	751	Write_rows_v1	1	1043	table_id: 82 flags: STMT_END_F
master-bin.000001	1043	Xid	1	1070	COMMIT 
master-bin.000001	1070	Gtid	1	1108	BEGIN GTID 0-1-4
master-bin.000001	1108	Table_map	1	1152	table_id: 82 (test.t1)
master-bin.000001	1152	Write_rows_v1	1	1444	table_id: 82 flags: STMT_END_F
master-bin.000001	1444	Xid	1	1471	COMMIT 
master-bin.000001	1471	Gtid	1	1509	GTID 0-1-5
master-bin.000001	1509	Query	1	1589	use `test`; optimize table t1
master-bin.000001	1589	Gtid	1	1627	GTID 0-1-6
master-bin.000001	1627	Query	1	1731	use `test`; DROP TABLE `t1` 
include/rpl_end.inc
