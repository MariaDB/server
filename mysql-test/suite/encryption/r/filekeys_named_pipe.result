install soname 'file_key_management';
Warnings:
Note	1	Read from /open-source/mariadb/build/mysql-test/var/tmp/fifo.key , filesize: 105B,max key file size :1048576B 
create table t1(c1 bigint not null, b char(200))  engine=innodb encrypted=yes encryption_key_id=1;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `c1` bigint(20) NOT NULL,
  `b` char(200) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 `encrypted`=yes `encryption_key_id`=1
insert t1 values (12345, repeat('1234567890', 20));
alter table t1 encryption_key_id=2;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `c1` bigint(20) NOT NULL,
  `b` char(200) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 `encrypted`=yes `encryption_key_id`=2
alter table t1 encryption_key_id=3;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `c1` bigint(20) NOT NULL,
  `b` char(200) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1 `encrypted`=yes `encryption_key_id`=3
# Reset mysqld
drop table t1;
uninstall soname 'file_key_management';
Warnings:
Warning	1620	Plugin is busy and will be uninstalled on shutdown
# restart
