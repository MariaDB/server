connection node_2;
connection node_1;
CREATE TABLE t1 (f1 INT PRIMARY KEY);
connection node_1;
SET DEBUG_SYNC = "wsrep_after_commit_order_leave SIGNAL acol_reached WAIT_FOR acol_continue";
INSERT INTO t1 VALUES (1);
connection ctrl;
SET DEBUG_SYNC = "now WAIT_FOR acol_reached";
connection node_1_sr;
SET SESSION wsrep_sync_wait = 0;
SET SESSION wsrep_trx_fragment_unit = 'rows';
SET SESSION wsrep_trx_fragment_size = 1;
START TRANSACTION;
INSERT INTO t1 VALUES (2);
connection ctrl;
SET DEBUG_SYNC = "now SIGNAL acol_continue";
connection node_1;
connection node_1_sr;
ROLLBACK;
connection ctrl;
SET DEBUG_SYNC = "RESET";
disconnect ctrl;
disconnect node_1_sr;
connection node_1;
DROP TABLE t1;
disconnect node_2;
disconnect node_1;
