connection node_2;
connection node_1;
connection node_1;
CREATE SEQUENCE seq NOCACHE ENGINE=InnoDB;
SELECT NEXTVAL(seq);
NEXTVAL(seq)
1
connection node_2;
SELECT NEXTVAL(seq);
NEXTVAL(seq)
2
connection node_1;
SELECT NEXTVAL(seq);
NEXTVAL(seq)
3
SELECT SETVAL(seq, 100);
SETVAL(seq, 100)
100
connection node_2;
SELECT NEXTVAL(seq);
NEXTVAL(seq)
101
connection node_1;
SELECT NEXTVAL(seq);
NEXTVAL(seq)
102
DROP SEQUENCE seq;
CREATE TABLE t1(f1 INT);
CREATE SEQUENCE seq_transaction NOCACHE ENGINE=InnoDB;
START TRANSACTION;
INSERT INTO t1 VALUES (0);
SELECT NEXTVAL(seq_transaction);
NEXTVAL(seq_transaction)
1
INSERT INTO t1 VALUES (NEXTVAL(seq_transaction));
COMMIT;
connection node_2;
SELECT COUNT(*) FROM t1;
COUNT(*)
2
SELECT NEXTVAL(seq_transaction);
NEXTVAL(seq_transaction)
3
connection node_1;
SELECT NEXTVAL(seq_transaction);
NEXTVAL(seq_transaction)
4
DROP SEQUENCE seq_transaction;
DROP TABLE t1;
