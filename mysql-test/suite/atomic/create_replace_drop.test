--source include/have_log_bin.inc

# Testing of atomic CREATE OR REPLACE TABLE with DROP of conflicting table
# Binary logging is used
# In case of failure, the old t2 table should not exist anymore

select @@drop_before_create_or_replace;

let $engines='aria','innodb';

# Ignore warnings from Aria recovery phase
call mtr.add_suppression("mariadbd.*UNDO records skipped in UNDO phase");
call mtr.add_suppression("mariadbd.*File.*t2.* not found");

let $crash_points='ddl_log_create_before_create_frm', 'storage_engine_middle_of_create', 'ddl_log_create_before_create_table', 'ddl_log_create_after_create_table', 'ddl_log_create_after_send_data', 'ddl_log_finalize_create', 'ddl_log_create_after_drop', 'ddl_log_finalize_create_after_link', 'ddl_log_create_before_binlog', 'ddl_log_create_after_prepare_eof', 'ddl_log_create_after_binlog', 'ddl_log_create_middle_complete', 'ddl_log_create_complete';

--source create_replace.test
