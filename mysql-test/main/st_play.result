create table users (
city varchar(100)
);
insert into users select 'Moscow' from seq_1_to_99;
insert into users select 'Helsinki' from seq_1_to_2;
analyze table users persistent for all;
Table	Op	Msg_type	Msg_text
test.users	analyze	status	Engine-independent statistics collected
test.users	analyze	status	OK
select hex(histogram) from mysql.column_stats where table_name='users';
hex(histogram)
00000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
explain extended select * from users where city = 'Moscow';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	97.66	Using where
Warnings:
Note	1003	select `test`.`users`.`city` AS `city` from `test`.`users` where `test`.`users`.`city` = 'Moscow'
analyze select * from users where city = 'Moscow';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	r_rows	filtered	r_filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	101.00	97.66	98.02	Using where
delete from mysql.column_stats where table_name='users';
set histogram_type=json;
set histogram_size=10;
analyze table users persistent for all;
Table	Op	Msg_type	Msg_text
test.users	analyze	status	Engine-independent statistics collected
test.users	analyze	status	Table is already up to date
select histogram from mysql.column_stats where table_name='users';
histogram
[]
explain extended select * from users where city = 'Moscow';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	50.00	Using where
Warnings:
Note	1003	select `test`.`users`.`city` AS `city` from `test`.`users` where `test`.`users`.`city` = 'Moscow'
analyze select * from users where city = 'Moscow';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	r_rows	filtered	r_filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	101.00	50.00	98.02	Using where
