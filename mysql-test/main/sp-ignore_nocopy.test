--echo # 
--echo # MDEV-34316 sql_mode=ORACLE: Ignore the NOCOPY keyword in stored routine parameters
--echo # 

DELIMITER $$;

--echo # 
--echo # sql_mode=DEFAULT. Test with function, IN NOCOPY
--echo # 

--error ER_PARSE_ERROR
CREATE OR REPLACE FUNCTION example_func(IN NOCOPY p_in INT) RETURNS INT
BEGIN
  RETURN 0;
END;
$$

--echo # 
--echo # sql_mode=DEFAULT. Test with function, OUT NOCOPY
--echo # 

--error ER_PARSE_ERROR
CREATE OR REPLACE FUNCTION example_func(OUT NOCOPY p_out INT) RETURNS INT
BEGIN
  RETURN 0;
END;
$$

--echo # 
--echo # sql_mode=DEFAULT. Test with function, INOUT NOCOPY
--echo # 

--error ER_PARSE_ERROR
CREATE OR REPLACE FUNCTION example_func(INOUT NOCOPY p_inout INT) RETURNS INT
BEGIN
  RETURN 0;
END;
$$

--echo # 
--echo # sql_mode=DEFAULT. Test with procedure, IN NOCOPY
--echo # 

--error ER_PARSE_ERROR
CREATE OR REPLACE PROCEDURE example_proc(IN NOCOPY p_in INT)
BEGIN
END;
$$

--echo # 
--echo # sql_mode=DEFAULT. Test with procedure, OUT NOCOPY
--echo # 

--error ER_PARSE_ERROR
CREATE OR REPLACE PROCEDURE example_proc(OUT NOCOPY p_out INT)
BEGIN
END;
$$

--echo # 
--echo # sql_mode=DEFAULT. Test with procedure, INOUT NOCOPY
--echo # 

--error ER_PARSE_ERROR
CREATE OR REPLACE PROCEDURE example_proc(INOUT NOCOPY p_inout INT)
BEGIN
END;
$$

DELIMITER ;$$

SET sql_mode=ORACLE;

--echo # 
--echo # sql_mode=ORACLE. Test with function
--echo # 

DELIMITER $$;

CREATE OR REPLACE FUNCTION example_func(
  p_in1 IN VARCHAR(255),
  p_in2 IN NOCOPY VARCHAR(255),
  p_out1 OUT INT,
  p_out2 OUT NOCOPY INT,
  p_in_out1 IN OUT VARCHAR(255),
  p_in_out2 IN OUT NOCOPY VARCHAR(255),
  p_in_out3 INOUT NUMBER,
  p_in_out4 INOUT NOCOPY NUMBER) RETURN NUMBER AS
BEGIN
  RETURN 0;
END;

$$

DELIMITER ;$$

DROP FUNCTION example_func;

--echo # 
--echo # sql_mode=ORACLE. Test with procedure
--echo # 

DELIMITER $$;

CREATE OR REPLACE PROCEDURE example_proc(
  p_in1 IN VARCHAR(255),
  p_in2 IN NOCOPY VARCHAR(255),
  p_out1 OUT INT,
  p_out2 OUT NOCOPY INT,
  p_in_out1 IN OUT VARCHAR(255),
  p_in_out2 IN OUT NOCOPY VARCHAR(255),
  p_in_out3 INOUT NUMBER,
  p_in_out4 INOUT NOCOPY NUMBER) AS
BEGIN
END;

$$

DELIMITER ;$$

DROP PROCEDURE example_proc;
