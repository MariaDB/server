--source include/have_innodb.inc
set default_storage_engine=innodb;
--source include/have_partition.inc
let $datadir=`select @@datadir`;

CREATE TABLE t1 (a int, b varchar(100)) engine=MyISAM;

CREATE TABLE employees (
    emp_no      INT             NOT NULL,
    birth_date  DATE            NOT NULL,
    first_name  VARCHAR(14)     NOT NULL,
    last_name   VARCHAR(16)     NOT NULL,
    gender      ENUM ('M','F')  NOT NULL,
    hire_date   DATE            NOT NULL,
    PRIMARY KEY (emp_no)                 
);

CREATE TABLE departments (
    dept_no     CHAR(4)         NOT NULL,
    dept_name   VARCHAR(40)     NOT NULL,
    PRIMARY KEY (dept_no),
    UNIQUE  KEY (dept_name)
);

CREATE TABLE index_table(
    roll_number INT         NOT NULL PRIMARY KEY,
    name        VARCHAR(40) NOT NULL,
    mark        text        NOT NULL,
    img         blob        NOT NULL,
    INDEX (roll_number, name(20)),
    INDEX (img(80))
);

CREATE TABLE student (
    id          VARCHAR(20) NOT NULL,
    first_name  VARCHAR(40) NOT NULL,
    last_name   VARCHAR(40) COMMENT "Last name is optional",
    age         INT         NOT NULL,
    phone_no    VARCHAR(13),
    address     VARCHAR(95) NOT NULL  COMMENT "The full address",
    PRIMARY KEY (id)  COMMENT "Id is unique for each student",
    UNIQUE KEY (phone_no)
) COMMENT="Student table with minimum required details";

CREATE TABLE sales (
    cust_id   INT          NOT NULL,
    name      VARCHAR(40),
    store_id  VARCHAR(20)  NOT NULL,
    bill_no   INT          NOT NULL,
    bill_date DATE         NOT NULL PRIMARY KEY,
    amount    DECIMAL(8,2) NOT NULL
)
PARTITION BY RANGE (year(bill_date)) (
    PARTITION p0 VALUES LESS THAN (2016),
    PARTITION p1 VALUES LESS THAN (2017),
    PARTITION p2 VALUES LESS THAN (2018),
    PARTITION p3 VALUES LESS THAN (2020)
);

CREATE TABLE serverlogs (
    serverid INT      NOT NULL, 
    logdata  BLOB     NOT NULL,
    created  DATETIME NOT NULL
)
PARTITION BY HASH (serverid)
PARTITIONS 10;

CREATE TABLE custom_types (
    id  UUID  PRIMARY KEY,
    ip4 INET4 UNIQUE,
    ip6 INET6
);

CREATE TABLE contacts (
    id                INT          AUTO_INCREMENT PRIMARY KEY,
    first_name        VARCHAR(50)  NOT NULL,
    last_name         VARCHAR(50)  NOT NULL,
    email             VARCHAR(100) NOT NULL,
    phone             VARCHAR(20)  NOT NULL,
    fullname          VARCHAR(101) GENERATED ALWAYS AS (CONCAT(first_name,' ',last_name)) VIRTUAL,
    full_contact_info VARCHAR(150) GENERATED ALWAYS AS (CONCAT(email,' ',phone)) STORED
);

CREATE TABLE triangle (
    sno        INT     PRIMARY KEY,
    side_a     DOUBLE,
    side_b     DOUBLE,
    side_c     DOUBLE  AS (SQRT(side_a * side_a + side_b * side_b)) CHECK(side_c > side_a),
    all_sides  JSON,
    CONSTRAINT chk     CHECK (side_a > 0)
);

CREATE TABLE tinyints (
    a TINYINT          DEFAULT 122,
    b TINYINT UNSIGNED DEFAULT 250,
    c TINYINT ZEROFILL DEFAULT 18
);

CREATE TABLE smallints (
    a SMALLINT          DEFAULT -31632,
    b SMALLINT UNSIGNED DEFAULT 65285,
    c SMALLINT ZEROFILL DEFAULT 891
);

CREATE TABLE mediumints (
    a MEDIUMINT          DEFAULT -8182635,
    b MEDIUMINT UNSIGNED DEFAULT 12477235,
    c MEDIUMINT ZEROFILL DEFAULT 46789
);

CREATE TABLE ints (
    a INT          DEFAULT 2143484644,
    b INT UNSIGNED DEFAULT 4294967295,
    c INT ZEROFILL DEFAULT 4
);

CREATE TABLE bigints (
    a BIGINT          DEFAULT -9223372036854775808,
    b BIGINT UNSIGNED DEFAULT 18446744073709551615,
    c BIGINT ZEROFILL DEFAULT 46792358
);

CREATE TABLE decimals (
    a DECIMAL(40,8)           DEFAULT -37.342,
    b DECIMAL(55,15) UNSIGNED DEFAULT 8947266.432643,
    c DECIMAL(4)     ZEROFILL DEFAULT 4789.5784
);

CREATE TABLE floats (
    a FLOAT(10,5)        DEFAULT -7314.5472,
    b FLOAT(20)  UNSIGNED DEFAULT 578.4788975,
    c FLOAT      ZEROFILL DEFAULT 3.402823466E+38
);

CREATE TABLE doubles (
    a DOUBLE          DEFAULT 4785845.2655,
    b DOUBLE UNSIGNED DEFAULT 1.7976931348623157E+308,
    c DOUBLE ZEROFILL DEFAULT 875487935479.7986437289064
);

CREATE TABLE bit_s (
    b1 BIT(8)  DEFAULT 255,
    b2 BIT(20) DEFAULT b'11000000110000111100'
);

CREATE TABLE chars (
    a CHAR(30) DEFAULT 'Maria'
);

CREATE TABLE varchars (
    a VARCHAR(300) DEFAULT 'Fire is hot'
) CHARSET=utf8mb4;

CREATE TABLE inet4s (
    a INET4 DEFAULT '19.117.63.126',
    b INET4 DEFAULT '128.250.121.8'
);

CREATE TABLE inet6s (
    a INET6 DEFAULT '2001:0db8:0000:0000:0000:ff00:0042:8329',
    b INET6 DEFAULT '::ffff:192.0.2.128'
);

CREATE TABLE enums (
    fruit ENUM('apple', 'orange', 'pear') DEFAULT 'apple'
);

CREATE TABLE sets (
    color SET('red', 'green', 'blue', 'yellow', 'white', 'black') DEFAULT 'green,blue'
);

CREATE TABLE temporal_defaults (
    dates         DATE        DEFAULT '2010-01-12',
    times         TIME(6)     DEFAULT '14:34:52.4373',
    date_and_time DATETIME(4) DEFAULT '2002-05-24 23:32:11.637985',
    time_stamps   TIMESTAMP   DEFAULT '1995-03-10 12:50:31.8745',
    years         YEAR        DEFAULT '2000'
);

--echo 

--echo # Table t1
--echo 
SHOW CREATE TABLE t1;
--echo
-- exec $MARIAFRM $datadir/test/t1.frm
--echo
 
--echo # Table employees
--echo 
SHOW CREATE TABLE employees;
--echo
-- exec $MARIAFRM $datadir/test/employees.frm
--echo
 
--echo # Table departments
--echo 
SHOW CREATE TABLE departments;
--echo
-- exec $MARIAFRM $datadir/test/departments.frm
--echo
 
--echo # Table index_table
--echo 
SHOW CREATE TABLE index_table;
--echo
-- exec $MARIAFRM $datadir/test/index_table.frm
--echo
 
--echo # Table student
--echo 
SHOW CREATE TABLE student;
--echo
-- exec $MARIAFRM $datadir/test/student.frm
--echo
 
--echo # Table sales
--echo 
SHOW CREATE TABLE sales;
--echo
-- exec $MARIAFRM $datadir/test/sales.frm
--echo
 
--echo # Table serverlogs
--echo 
SHOW CREATE TABLE serverlogs;
--echo
-- exec $MARIAFRM $datadir/test/serverlogs.frm
--echo
 
--echo # Table custom_types
--echo 
SHOW CREATE TABLE custom_types;
--echo
-- exec $MARIAFRM $datadir/test/custom_types.frm
--echo
 
--echo # Table contacts
--echo 
SHOW CREATE TABLE contacts;
--echo
-- exec $MARIAFRM $datadir/test/contacts.frm
--echo
 
--echo # Table triangle
--echo 
SHOW CREATE TABLE triangle;
--echo
-- exec $MARIAFRM $datadir/test/triangle.frm
--echo
 
--echo # Table tinyints
--echo 
SHOW CREATE TABLE tinyints;
--echo
-- exec $MARIAFRM $datadir/test/tinyints.frm
--echo
 
--echo # Table smallints
--echo 
SHOW CREATE TABLE smallints;
--echo
-- exec $MARIAFRM $datadir/test/smallints.frm
--echo
 
--echo # Table mediumints
--echo 
SHOW CREATE TABLE mediumints;
--echo
-- exec $MARIAFRM $datadir/test/mediumints.frm
--echo
 
--echo # Table ints
--echo 
SHOW CREATE TABLE ints;
--echo
-- exec $MARIAFRM $datadir/test/ints.frm
--echo
 
--echo # Table bigints
--echo 
SHOW CREATE TABLE bigints;
--echo
-- exec $MARIAFRM $datadir/test/bigints.frm
--echo
 
--echo # Table decimals
--echo 
SHOW CREATE TABLE decimals;
--echo
-- exec $MARIAFRM $datadir/test/decimals.frm
--echo
 
--echo # Table floats
--echo 
SHOW CREATE TABLE floats;
--echo
-- exec $MARIAFRM $datadir/test/floats.frm
--echo
 
--echo # Table doubles
--echo 
SHOW CREATE TABLE doubles;
--echo
-- exec $MARIAFRM $datadir/test/doubles.frm
--echo
 
--echo # Table bit_s
--echo 
SHOW CREATE TABLE bit_s;
--echo
-- exec $MARIAFRM $datadir/test/bit_s.frm
--echo
 
--echo # Table chars
--echo 
SHOW CREATE TABLE chars;
--echo
-- exec $MARIAFRM $datadir/test/chars.frm
--echo
 
--echo # Table varchars
--echo 
SHOW CREATE TABLE varchars;
--echo
-- exec $MARIAFRM $datadir/test/varchars.frm
--echo
 
--echo # Table inet4s
--echo 
SHOW CREATE TABLE inet4s;
--echo
-- exec $MARIAFRM $datadir/test/inet4s.frm
--echo
 
--echo # Table inet6s
--echo 
SHOW CREATE TABLE inet6s;
--echo
-- exec $MARIAFRM $datadir/test/inet6s.frm
--echo
 
--echo # Table enums
--echo 
SHOW CREATE TABLE enums;
--echo
-- exec $MARIAFRM $datadir/test/enums.frm
--echo
 
--echo # Table sets
--echo 
SHOW CREATE TABLE sets;
--echo
-- exec $MARIAFRM $datadir/test/sets.frm
--echo
 
--echo # Table temporal_defaults
--echo 
SHOW CREATE TABLE temporal_defaults;
--echo
-- exec $MARIAFRM $datadir/test/temporal_defaults.frm
--echo

DROP TABLE t1;
DROP TABLE employees;
DROP TABLE departments;
DROP TABLE index_table;
DROP TABLE student;
DROP TABLE sales;
DROP TABLE serverlogs;
DROP TABLE custom_types;
DROP TABLE contacts;
DROP TABLE triangle;
DROP TABLE tinyints;
DROP TABLE smallints;
DROP TABLE mediumints;
DROP TABLE ints;
DROP TABLE bigints;
DROP TABLE decimals;
DROP TABLE floats;
DROP TABLE doubles;
DROP TABLE bit_s;
DROP TABLE chars;
DROP TABLE varchars;
DROP TABLE inet4s;
DROP TABLE inet6s;
DROP TABLE enums;
DROP TABLE sets;
DROP TABLE temporal_defaults;
