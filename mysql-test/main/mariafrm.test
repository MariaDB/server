--source include/have_innodb.inc
set default_storage_engine=innodb;
--source include/have_partition.inc
let $datadir=`select @@datadir`;

CREATE TABLE t1 (a int, b varchar(100)) engine=MyISAM;

CREATE TABLE employees (
    emp_no      INT             NOT NULL,
    birth_date  DATE            NOT NULL,
    first_name  VARCHAR(14)     NOT NULL,
    last_name   VARCHAR(16)     NOT NULL,
    gender      ENUM ('M','F')  NOT NULL,
    hire_date   DATE            NOT NULL,
    PRIMARY KEY (emp_no)                 
);

CREATE TABLE departments (
    dept_no     CHAR(4)         NOT NULL,
    dept_name   VARCHAR(40)     NOT NULL,
    PRIMARY KEY (dept_no),
    UNIQUE  KEY (dept_name)
);

CREATE TABLE index_table(
    roll_number INT         NOT NULL PRIMARY KEY,
    name        VARCHAR(40) NOT NULL,
    mark        text        NOT NULL,
    img         blob        NOT NULL,
    INDEX (roll_number, name(20)),
    INDEX (img(80))
);

CREATE TABLE student (
    id          VARCHAR(20) NOT NULL,
    first_name  VARCHAR(40) NOT NULL,
    last_name   VARCHAR(40) COMMENT "Last name is optional",
    age         INT         NOT NULL,
    phone_no    VARCHAR(13),
    address     VARCHAR(95) NOT NULL  COMMENT "The full address",
    PRIMARY KEY (id)  COMMENT "Id is unique for each student",
    UNIQUE KEY (phone_no)
) COMMENT="Student table with minimum required details";

CREATE TABLE sales (
    cust_id   INT          NOT NULL,
    name      VARCHAR(40),
    store_id  VARCHAR(20)  NOT NULL,
    bill_no   INT          NOT NULL,
    bill_date DATE         NOT NULL PRIMARY KEY,
    amount    DECIMAL(8,2) NOT NULL
)
PARTITION BY RANGE (year(bill_date)) (
    PARTITION p0 VALUES LESS THAN (2016),
    PARTITION p1 VALUES LESS THAN (2017),
    PARTITION p2 VALUES LESS THAN (2018),
    PARTITION p3 VALUES LESS THAN (2020)
);

CREATE TABLE serverlogs (
    serverid INT      NOT NULL, 
    logdata  BLOB     NOT NULL,
    created  DATETIME NOT NULL
)
PARTITION BY HASH (serverid)
PARTITIONS 10;

CREATE TABLE custom_types (
    id  UUID  PRIMARY KEY,
    ip4 INET4 UNIQUE,
    ip6 INET6
);


--echo 

--echo # Table t1
--echo 
SHOW CREATE TABLE t1;
--echo
-- exec $MARIAFRM $datadir/test/t1.frm
--echo
 
--echo # Table employees
--echo 
SHOW CREATE TABLE employees;
--echo
-- exec $MARIAFRM $datadir/test/employees.frm
--echo
 
--echo # Table departments
--echo 
SHOW CREATE TABLE departments;
--echo
-- exec $MARIAFRM $datadir/test/departments.frm
--echo
 
--echo # Table index_table
--echo 
SHOW CREATE TABLE index_table;
--echo
-- exec $MARIAFRM $datadir/test/index_table.frm
--echo
 
--echo # Table student
--echo 
SHOW CREATE TABLE student;
--echo
-- exec $MARIAFRM $datadir/test/student.frm
--echo
 
--echo # Table sales
--echo 
SHOW CREATE TABLE sales;
--echo
-- exec $MARIAFRM $datadir/test/sales.frm
--echo
 
--echo # Table serverlogs
--echo 
SHOW CREATE TABLE serverlogs;
--echo
-- exec $MARIAFRM $datadir/test/serverlogs.frm
--echo
 
--echo # Table custom_types
--echo 
SHOW CREATE TABLE custom_types;
--echo
-- exec $MARIAFRM $datadir/test/custom_types.frm
--echo


DROP TABLE t1;
DROP TABLE employees;
DROP TABLE departments;
DROP TABLE index_table;
DROP TABLE student;
DROP TABLE sales;
DROP TABLE serverlogs;
DROP TABLE custom_types;
