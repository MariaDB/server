--echo #
--echo # MDEV-37939: Include function name in division by zero warnings
--echo #

--echo #
--echo # Test with ERROR_FOR_DIVISION_BY_ZERO enabled
--echo #
SET SESSION sql_mode='ERROR_FOR_DIVISION_BY_ZERO';

--echo # LOG family should show function context
SELECT LOG(-1);
SHOW WARNINGS;

SELECT LOG(0);
SHOW WARNINGS;

SELECT LN(0);
SHOW WARNINGS;

SELECT LN(-5);
SHOW WARNINGS;

SELECT LOG2(-1);
SHOW WARNINGS;

SELECT LOG10(-1);
SHOW WARNINGS;

--echo # Two-argument LOG: invalid second argument
SELECT LOG(2, -1);
SHOW WARNINGS;

--echo # Two-argument LOG: invalid base (negative)
SELECT LOG(-2, 10);
SHOW WARNINGS;

--echo # Two-argument LOG: base = 1 (log(1) = 0, causes division)
SELECT LOG(1, 10);
SHOW WARNINGS;

--echo # Non-LOG operations should stay generic
SELECT 1/0;
SHOW WARNINGS;

SELECT 5 DIV 0;
SHOW WARNINGS;

SELECT 5 MOD 0;
SHOW WARNINGS;

--echo # Valid inputs should produce no warnings
SELECT LOG(10);
SELECT LN(2.718);
SELECT LOG2(8);
SELECT LOG10(100);
SHOW WARNINGS;

--echo #
--echo # Test with ERROR_FOR_DIVISION_BY_ZERO disabled
--echo #
SET SESSION sql_mode='';

SELECT LOG(-1);
SHOW WARNINGS;
--echo # Should be empty - no warning when sql_mode doesn't include the flag
