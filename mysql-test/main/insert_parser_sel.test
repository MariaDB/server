#
# Syntax check for INSERT...RETURNING
#

--disable_warnings
drop table if exists t1,t2;
--enable_warnings

CREATE TABLE t1(id1 INT, val1 VARCHAR(1));
--echo Table t1 created successfully. Fields: id1 INT, val1 VARCHAR(1);

CREATE TABLE t2(id2 INT, val2 VARCHAR(1));
--echo Table t2 created successfully. Fields: id2 INT, val2 VARCHAR(1);

#
#Simple insert statement
#
--echo #Simple insert statement
INSERT INTO t1 (id1, val1) VALUES (1, 'a');
INSERT INTO t1 (id1, val1) VALUES (2, 'b');
INSERT INTO t1 (id1, val1) VALUES (3, 'c');
INSERT INTO t1 (id1, val1) VALUES (4, 'd');
INSERT INTO t1 (id1, val1) VALUES (5, 'e');
INSERT INTO t1 (id1, val1) VALUES (6, 'f');
INSERT INTO t1 (id1, val1) VALUES (7, 'g');
SELECT * FROM t1;
TRUNCATE TABLE t1;
SELECT * FROM t1;

#
# INSERT...SELECT
#
--echo #INSERT...SELECT
INSERT INTO t2(id2,val2) SELECT * FROM t1;
INSERT INTO t2(id2,val2) SELECT * FROM t1 WHERE id1=1 RETURNING *;
INSERT INTO t2(id2,val2) SELECT * FROM t1 WHERE id1=2 RETURNING id2,val2;
INSERT INTO t2(id2,val2) SELECT * FROM t1 WHERE id1=3 RETURNING id2 AS id;
INSERT INTO t2(id2,val2) SELECT * FROM t1 WHERE id1 IN (SELECT id1 FROM t1 WHERE id1 IN (3,4,5) );
SELECT * FROM t2;
DROP TABLE t1; 
DROP TABLE t2;

#
--echo #End of test case 
#