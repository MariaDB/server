--source include/have_utf8mb4.inc

--echo # Character Set Tests Setup
SET NAMES utf8mb4;
SET character_set_client = utf8mb4;
SET character_set_connection = utf8mb4;
SET character_set_results = utf8mb4;

--echo # Testing with UTF-8
SET NAMES utf8;
SELECT INITCAP('hello world') AS 'UTF-8 Basic Test';

--echo # Testing with UTF8MB4
SET NAMES utf8mb4;
SELECT INITCAP('hello world üëã') AS 'UTF8MB4 with Emoji';
SELECT INITCAP('‰∏≠ÊñáÊµãËØï') AS 'UTF8MB4 Chinese';

--echo # Testing character set conversion
SET NAMES utf8mb4;
SELECT INITCAP(CONVERT('hello world' USING latin1)) AS 'Converted Latin1';
SELECT INITCAP(CONVERT('fran√ßaise' USING utf8)) AS 'Converted UTF8';

--echo # Reset to default character set
SET NAMES utf8mb4;

--echo # Basic ASCII Tests
SELECT INITCAP('hello world') AS 'Expected "Hello World"';
SELECT INITCAP('HELLO WORLD') AS 'Expected "Hello World"';
SELECT INITCAP('hello WORLD') AS 'Expected "Hello World"';

--echo # Word Boundary Tests
SELECT INITCAP('hello,world') AS 'Expected "Hello,World"';
SELECT INITCAP('hello.world') AS 'Expected "Hello.World"';
SELECT INITCAP('hello-world') AS 'Expected "Hello-World"';
SELECT INITCAP('hello_world') AS 'Expected "Hello_World"';

--echo # Unicode Character Tests
SELECT INITCAP('‰∏≠ÊñáÊµãËØï') AS 'Chinese Text';
SELECT INITCAP('„Åì„Çì„Å´„Å°„ÅØ‰∏ñÁïå') AS 'Japanese Text';

--echo # Mixed Unicode and ASCII Tests
SELECT INITCAP('test‰∏≠Êñá') AS 'Mixed Text';

--echo # Special Character Tests
SELECT INITCAP('hello123world') AS 'Expected "Hello123world"';
SELECT INITCAP('123hello') AS 'Expected "123Hello"';
SELECT INITCAP('hello‰∏ñÁïå123') AS 'Mixed with Numbers';

--echo # NULL and Empty String Tests
SELECT INITCAP(NULL) AS 'Expected NULL';
SELECT INITCAP('') AS 'Expected ""';

# Extended Unicode Tests
SELECT INITCAP('√ºber') AS 'German Unicode';
SELECT INITCAP('fran√ßais') AS 'French Unicode';
SELECT INITCAP('espa√±ol') AS 'Spanish Unicode';
SELECT INITCAP('√ßok√ßa') AS 'Turkish Unicode';
SELECT INITCAP('istanbul ƒ∞s a bƒ∞g cIty in Asƒ∞a') AS 'Turkish Unicode';
SELECT INITCAP('ƒ∞STANBUL') AS 'Turkish ƒ∞/I Test';

# Special Case Tests
SELECT INITCAP('√©cole FRAN√áAISE') AS 'French Mixed Case';
SELECT INITCAP('√áOK√áA t√ºrk√ße') AS 'Turkish Mixed Case';

# Multi-word Special Character Tests
SELECT INITCAP('√©cole_fran√ßaise') AS 'Underscore Unicode';
SELECT INITCAP('√ßok√ßa,t√ºrk√ße') AS 'Comma Separated Unicode';

# Mixed ASCII and Unicode Tests
SELECT INITCAP('hello √ºber world') AS 'Mixed ASCII and Unicode';
SELECT INITCAP('HELLO √úBER WORLD') AS 'Mixed ASCII and Unicode Upper';
SELECT INITCAP('√∂√útstanding √§lph√§ testi√±g in √áOK√áA') AS 'Complex Mixed Case';

## Test Cyrillic characters
SELECT INITCAP('–ø—Ä–∏–≤–µ—Ç –º–∏—Ä') AS 'Cyrillic Test - Expected: –ü—Ä–∏–≤–µ—Ç –ú–∏—Ä';
SELECT INITCAP('–ü–†–ò–í–ï–¢ –ú–ò–†') AS 'Cyrillic Upper Test - Expected: –ü—Ä–∏–≤–µ—Ç –ú–∏—Ä';

## Test Greek characters 
SELECT INITCAP('Œ≥ŒµŒπŒ± œÉŒ±œÇ Œ∫œåœÉŒºŒøœÇ') AS 'Greek Test - Expected: ŒìŒµŒπŒ± Œ£Œ±œÇ ŒöœåœÉŒºŒøœÇ';
SELECT INITCAP('ŒìŒïŒôŒë Œ£ŒëŒ£ ŒöŒåŒ£ŒúŒüŒ£') AS 'Greek Upper Test - Expected: ŒìŒµŒπŒ± Œ£Œ±œÇ ŒöœåœÉŒºŒøœÇ';

## Test mixed scripts
SELECT INITCAP('hello –ø—Ä–∏–≤–µ—Ç Œ≥ŒµŒπŒ±') AS 'Mixed Scripts - Expected: Hello –ü—Ä–∏–≤–µ—Ç ŒìŒµŒπŒ±';

## Test existing Latin characters to ensure they still work
SELECT INITCAP('√ºber fran√ßais espa√±ol') AS 'Latin Extended - Expected: √úber Fran√ßais Espa√±ol';

## Test Turkish collation for proper locale detection
SET NAMES utf8mb4 COLLATE utf8mb4_turkish_ci;
SELECT INITCAP('i≈üƒ±k bili≈üim') AS 'Turkish Collation Test - Expected: ƒ∞≈üƒ±k Bili≈üim';
SET NAMES utf8mb4;

## Additional European Language Tests
SELECT INITCAP('–ø—Ä–∏–≤—ñ—Ç —Å–≤—ñ—Ç') AS 'Ukrainian Test - Expected: –ü—Ä–∏–≤—ñ—Ç –°–≤—ñ—Ç';
SELECT INITCAP('witaj ≈õwiecie') AS 'Polish Test - Expected: Witaj ≈öwiecie';
SELECT INITCAP('ahoj svƒõte') AS 'Czech Test - Expected: Ahoj Svƒõte';
SELECT INITCAP('zdravo svijete') AS 'Croatian Test - Expected: Zdravo Svijete';
SELECT INITCAP('–∑–¥—Ä–∞–≤–µ–π —Å–≤—è—Ç') AS 'Bulgarian Test - Expected: –ó–¥—Ä–∞–≤–µ–π –°–≤—è—Ç';
SELECT INITCAP('ol√° mundo') AS 'Portuguese Test - Expected: Ol√° Mundo';
SELECT INITCAP('hallo wereld') AS 'Dutch Test - Expected: Hallo Wereld';
SELECT INITCAP('hej v√§rlden') AS 'Swedish Test - Expected: Hej V√§rlden';
SELECT INITCAP('hei verden') AS 'Norwegian Test - Expected: Hei Verden';
SELECT INITCAP('hej verden') AS 'Danish Test - Expected: Hej Verden';
SELECT INITCAP('hall√≥ heimur') AS 'Icelandic Test - Expected: Hall√≥ Heimur';
SELECT INITCAP('hei maailma') AS 'Finnish Test - Expected: Hei Maailma';
SELECT INITCAP('szia vil√°g') AS 'Hungarian Test - Expected: Szia Vil√°g';
SELECT INITCAP('salut lume') AS 'Romanian Test - Expected: Salut Lume';
SELECT INITCAP('zdravo svet') AS 'Serbian Test - Expected: Zdravo Svet';
SELECT INITCAP('ahoj svet') AS 'Slovak Test - Expected: Ahoj Svet';
SELECT INITCAP('zdravo svet') AS 'Slovenian Test - Expected: Zdravo Svet';
SELECT INITCAP('sveiki pasaule') AS 'Latvian Test - Expected: Sveiki Pasaule';
SELECT INITCAP('labas pasauli') AS 'Lithuanian Test - Expected: Labas Pasauli';
SELECT INITCAP('tere maailm') AS 'Estonian Test - Expected: Tere Maailm';
SELECT INITCAP('–≤—ñ—Ç–∞—é —Å–≤–µ—Ç') AS 'Belarusian Test - Expected: –í—ñ—Ç–∞—é –°–≤–µ—Ç';
SELECT INITCAP('·Éí·Éê·Éõ·Éê·É†·ÉØ·Éù·Éë·Éê ·Éõ·É°·Éù·É§·Éö·Éò·Éù') AS 'Georgian Test - Expected: ·Éí·Éê·Éõ·Éê·É†·ÉØ·Éù·Éë·Éê ·Éõ·É°·Éù·É§·Éö·Éò·Éù';
SELECT INITCAP('’¢’°÷Ä’•÷Ç ’°’∑’≠’°÷Ä’∞') AS 'Armenian Test - Expected: ‘≤’°÷Ä’•÷Ç ‘±’∑’≠’°÷Ä’∞';
SELECT INITCAP('salam d√ºnya') AS 'Azerbaijani Test - Expected: Salam D√ºnya';