#
# MDEV-34125: ANALYZE FORMAT=JSON: r_engine_stats.pages_read_time_ms has wrong scale
#
create table t1 (
a varchar(255),
b varchar(255),
c varchar(255),
d varchar(255),
primary key(a,b,c,d)
) engine=innodb;
insert into t1 select
repeat(uuid(), 7), 
repeat(uuid(), 7), 
repeat(uuid(), 7), 
repeat(uuid(), 7)
from seq_1_to_16384;
# restart
set log_slow_verbosity='engine';
set long_query_time=0.0;
set @js='$analyze_output';
select @js;
@js
{
  "query_block": {
    "select_id": 1,
    "r_loops": 1,
    "r_total_time_ms": "REPLACED",
    "table": {
      "table_name": "t1",
      "access_type": "index",
      "key": "PRIMARY",
      "key_length": "1028",
      "used_key_parts": ["a", "b", "c", "d"],
      "r_loops": 1,
      "rows": 1,
      "r_rows": 16384,
      "r_table_time_ms": "REPLACED",
      "r_other_time_ms": "REPLACED",
      "r_engine_stats": {
        "pages_accessed": "REPLACED",
        "pages_read_count": "REPLACED",
        "pages_read_time_ms": "REPLACED"
      },
      "filtered": 100,
      "r_filtered": 100,
      "using_index": true
    }
  }
}
set @pages_read_time_ms=
(select json_value(@js,'$.query_block.table.r_engine_stats.pages_read_time_ms'));


  OK: pages_read_time is same in slow log and ANALYZE

set long_query_time=default;
drop table t1;
