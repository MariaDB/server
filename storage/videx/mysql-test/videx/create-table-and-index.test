--source include/have_videx.inc

CREATE TABLE `orders` (
  `O_ORDERKEY` int NOT NULL,
  `O_CUSTKEY` int NOT NULL,
  `O_ORDERSTATUS` char(1) NOT NULL,
  `O_TOTALPRICE` decimal(15,2) NOT NULL,
  `O_ORDERDATE` date NOT NULL,
  `O_ORDERPRIORITY` char(15) NOT NULL,
  `O_CLERK` char(15) NOT NULL,
  `O_SHIPPRIORITY` int NOT NULL,
  `O_COMMENT` varchar(79) NOT NULL,
  PRIMARY KEY (`O_ORDERKEY`),
  KEY `ORDERS_FK1` (`O_CUSTKEY`)
) ENGINE=VIDEX;

SET SESSION videx_server_ip=NULL;

SHOW CREATE TABLE orders;

CREATE INDEX idx_orders_status_date ON orders (O_ORDERSTATUS, O_ORDERDATE);

SHOW CREATE TABLE orders;

DROP TABLE orders;

--error ER_ILLEGAL_HA_CREATE_OPTION
create sequence s1 engine=videx;

--echo #
--echo # MDEV-38479 Crash in CREATE OR REPLACE SEQUENCE when new sequence
--echo # cannot be created
--echo #

create sequence s1;
--error ER_ILLEGAL_HA_CREATE_OPTION
create or replace sequence s1 engine=videx;
drop sequence s1;

SET SESSION videx_server_ip=DEFAULT;
