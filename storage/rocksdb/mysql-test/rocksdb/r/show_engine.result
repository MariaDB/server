DROP TABLE IF EXISTS t1;
DROP TABLE IF EXISTS t2;
DROP TABLE IF EXISTS t3;
DROP TABLE IF EXISTS t4;
CREATE TABLE t1 (i INT, PRIMARY KEY (i) COMMENT 'cf_t1') ENGINE = ROCKSDB;
CREATE TABLE t2 (j INT, PRIMARY KEY (j) COMMENT 'rev:cf_t2') ENGINE = ROCKSDB;
CREATE TABLE t3 (k INT, PRIMARY KEY (k) COMMENT 'cf_t1') ENGINE = ROCKSDB;
CREATE TABLE t4 (l INT, PRIMARY KEY (l) COMMENT 'cf_t4') ENGINE = ROCKSDB
PARTITION BY KEY(l) PARTITIONS 4;
SHOW ENGINE rocksdb STATUS;
Type	Name	Status
DBSTATS	rocksdb	#
CF_COMPACTION	__system__	#
CF_COMPACTION	cf_t1	#
CF_COMPACTION	default	#
CF_COMPACTION	rev:cf_t2	#
Memory_Stats	rocksdb	#
INSERT INTO t1 VALUES (1), (2), (3);
SELECT COUNT(*) FROM t1;
COUNT(*)
3
INSERT INTO t2 VALUES (1), (2), (3), (4);
SELECT COUNT(*) FROM t2;
COUNT(*)
4
INSERT INTO t4 VALUES (1), (2), (3), (4), (5);
SELECT COUNT(*) FROM t4;
COUNT(*)
5
SELECT * FROM INFORMATION_SCHEMA.ROCKSDB_CFSTATS;
CF_NAME	STAT_TYPE	VALUE
__system__	NUM_IMMUTABLE_MEM_TABLE	#
__system__	MEM_TABLE_FLUSH_PENDING	#
__system__	COMPACTION_PENDING	#
__system__	CUR_SIZE_ACTIVE_MEM_TABLE	#
__system__	CUR_SIZE_ALL_MEM_TABLES	#
__system__	NUM_ENTRIES_ACTIVE_MEM_TABLE	#
__system__	NUM_ENTRIES_IMM_MEM_TABLES	#
__system__	NON_BLOCK_CACHE_SST_MEM_USAGE	#
__system__	NUM_LIVE_VERSIONS	#
cf_t1	NUM_IMMUTABLE_MEM_TABLE	#
cf_t1	MEM_TABLE_FLUSH_PENDING	#
cf_t1	COMPACTION_PENDING	#
cf_t1	CUR_SIZE_ACTIVE_MEM_TABLE	#
cf_t1	CUR_SIZE_ALL_MEM_TABLES	#
cf_t1	NUM_ENTRIES_ACTIVE_MEM_TABLE	#
cf_t1	NUM_ENTRIES_IMM_MEM_TABLES	#
cf_t1	NON_BLOCK_CACHE_SST_MEM_USAGE	#
cf_t1	NUM_LIVE_VERSIONS	#
default	NUM_IMMUTABLE_MEM_TABLE	#
default	MEM_TABLE_FLUSH_PENDING	#
default	COMPACTION_PENDING	#
default	CUR_SIZE_ACTIVE_MEM_TABLE	#
default	CUR_SIZE_ALL_MEM_TABLES	#
default	NUM_ENTRIES_ACTIVE_MEM_TABLE	#
default	NUM_ENTRIES_IMM_MEM_TABLES	#
default	NON_BLOCK_CACHE_SST_MEM_USAGE	#
default	NUM_LIVE_VERSIONS	#
rev:cf_t2	NUM_IMMUTABLE_MEM_TABLE	#
rev:cf_t2	MEM_TABLE_FLUSH_PENDING	#
rev:cf_t2	COMPACTION_PENDING	#
rev:cf_t2	CUR_SIZE_ACTIVE_MEM_TABLE	#
rev:cf_t2	CUR_SIZE_ALL_MEM_TABLES	#
rev:cf_t2	NUM_ENTRIES_ACTIVE_MEM_TABLE	#
rev:cf_t2	NUM_ENTRIES_IMM_MEM_TABLES	#
rev:cf_t2	NON_BLOCK_CACHE_SST_MEM_USAGE	#
rev:cf_t2	NUM_LIVE_VERSIONS	#
SELECT * FROM INFORMATION_SCHEMA.ROCKSDB_DBSTATS;
STAT_TYPE	VALUE
DB_BACKGROUND_ERRORS	#
DB_NUM_SNAPSHOTS	#
DB_OLDEST_SNAPSHOT_TIME	#
DB_BLOCK_CACHE_USAGE	#
SELECT TABLE_SCHEMA, TABLE_NAME, PARTITION_NAME, COUNT(STAT_TYPE)
FROM INFORMATION_SCHEMA.ROCKSDB_PERF_CONTEXT
WHERE TABLE_SCHEMA = 'test'
GROUP BY TABLE_NAME, PARTITION_NAME;
TABLE_SCHEMA	TABLE_NAME	PARTITION_NAME	COUNT(STAT_TYPE)
test	t1	NULL	43
test	t2	NULL	43
test	t4	p0	43
test	t4	p1	43
test	t4	p2	43
test	t4	p3	43
SELECT * FROM INFORMATION_SCHEMA.ROCKSDB_CF_OPTIONS;
CF_NAME	OPTION_TYPE	VALUE
__system__	COMPARATOR	#
__system__	MERGE_OPERATOR	#
__system__	COMPACTION_FILTER	#
__system__	COMPACTION_FILTER_FACTORY	#
__system__	WRITE_BUFFER_SIZE	#
__system__	MAX_WRITE_BUFFER_NUMBER	#
__system__	MIN_WRITE_BUFFER_NUMBER_TO_MERGE	#
__system__	NUM_LEVELS	#
__system__	LEVEL0_FILE_NUM_COMPACTION_TRIGGER	#
__system__	LEVEL0_SLOWDOWN_WRITES_TRIGGER	#
__system__	LEVEL0_STOP_WRITES_TRIGGER	#
__system__	MAX_MEM_COMPACTION_LEVEL	#
__system__	TARGET_FILE_SIZE_BASE	#
__system__	TARGET_FILE_SIZE_MULTIPLIER	#
__system__	MAX_BYTES_FOR_LEVEL_BASE	#
__system__	LEVEL_COMPACTION_DYNAMIC_LEVEL_BYTES	#
__system__	MAX_BYTES_FOR_LEVEL_MULTIPLIER	#
__system__	SOFT_RATE_LIMIT	#
__system__	HARD_RATE_LIMIT	#
__system__	RATE_LIMIT_DELAY_MAX_MILLISECONDS	#
__system__	ARENA_BLOCK_SIZE	#
__system__	DISABLE_AUTO_COMPACTIONS	#
__system__	PURGE_REDUNDANT_KVS_WHILE_FLUSH	#
__system__	MAX_SEQUENTIAL_SKIP_IN_ITERATIONS	#
__system__	MEMTABLE_FACTORY	#
__system__	INPLACE_UPDATE_SUPPORT	#
__system__	INPLACE_UPDATE_NUM_LOCKS	#
__system__	MEMTABLE_PREFIX_BLOOM_BITS_RATIO	#
__system__	MEMTABLE_PREFIX_BLOOM_HUGE_PAGE_TLB_SIZE	#
__system__	BLOOM_LOCALITY	#
__system__	MAX_SUCCESSIVE_MERGES	#
__system__	OPTIMIZE_FILTERS_FOR_HITS	#
__system__	MAX_BYTES_FOR_LEVEL_MULTIPLIER_ADDITIONAL	#
__system__	COMPRESSION_TYPE	#
__system__	COMPRESSION_PER_LEVEL	#
__system__	COMPRESSION_OPTS	#
__system__	BOTTOMMOST_COMPRESSION	#
__system__	PREFIX_EXTRACTOR	#
__system__	COMPACTION_STYLE	#
__system__	COMPACTION_OPTIONS_UNIVERSAL	#
__system__	COMPACTION_OPTION_FIFO::MAX_TABLE_FILES_SIZE	#
__system__	BLOCK_BASED_TABLE_FACTORY::CACHE_INDEX_AND_FILTER_BLOCKS	#
__system__	BLOCK_BASED_TABLE_FACTORY::INDEX_TYPE	#
__system__	BLOCK_BASED_TABLE_FACTORY::HASH_INDEX_ALLOW_COLLISION	#
__system__	BLOCK_BASED_TABLE_FACTORY::CHECKSUM	#
__system__	BLOCK_BASED_TABLE_FACTORY::NO_BLOCK_CACHE	#
__system__	BLOCK_BASED_TABLE_FACTORY::FILTER_POLICY	#
__system__	BLOCK_BASED_TABLE_FACTORY::WHOLE_KEY_FILTERING	#
__system__	BLOCK_BASED_TABLE_FACTORY::BLOCK_CACHE	#
__system__	BLOCK_BASED_TABLE_FACTORY::BLOCK_CACHE_COMPRESSED	#
__system__	BLOCK_BASED_TABLE_FACTORY::BLOCK_SIZE	#
__system__	BLOCK_BASED_TABLE_FACTORY::BLOCK_SIZE_DEVIATION	#
__system__	BLOCK_BASED_TABLE_FACTORY::BLOCK_RESTART_INTERVAL	#
__system__	BLOCK_BASED_TABLE_FACTORY::FORMAT_VERSION	#
cf_t1	COMPARATOR	#
cf_t1	MERGE_OPERATOR	#
cf_t1	COMPACTION_FILTER	#
cf_t1	COMPACTION_FILTER_FACTORY	#
cf_t1	WRITE_BUFFER_SIZE	#
cf_t1	MAX_WRITE_BUFFER_NUMBER	#
cf_t1	MIN_WRITE_BUFFER_NUMBER_TO_MERGE	#
cf_t1	NUM_LEVELS	#
cf_t1	LEVEL0_FILE_NUM_COMPACTION_TRIGGER	#
cf_t1	LEVEL0_SLOWDOWN_WRITES_TRIGGER	#
cf_t1	LEVEL0_STOP_WRITES_TRIGGER	#
cf_t1	MAX_MEM_COMPACTION_LEVEL	#
cf_t1	TARGET_FILE_SIZE_BASE	#
cf_t1	TARGET_FILE_SIZE_MULTIPLIER	#
cf_t1	MAX_BYTES_FOR_LEVEL_BASE	#
cf_t1	LEVEL_COMPACTION_DYNAMIC_LEVEL_BYTES	#
cf_t1	MAX_BYTES_FOR_LEVEL_MULTIPLIER	#
cf_t1	SOFT_RATE_LIMIT	#
cf_t1	HARD_RATE_LIMIT	#
cf_t1	RATE_LIMIT_DELAY_MAX_MILLISECONDS	#
cf_t1	ARENA_BLOCK_SIZE	#
cf_t1	DISABLE_AUTO_COMPACTIONS	#
cf_t1	PURGE_REDUNDANT_KVS_WHILE_FLUSH	#
cf_t1	MAX_SEQUENTIAL_SKIP_IN_ITERATIONS	#
cf_t1	MEMTABLE_FACTORY	#
cf_t1	INPLACE_UPDATE_SUPPORT	#
cf_t1	INPLACE_UPDATE_NUM_LOCKS	#
cf_t1	MEMTABLE_PREFIX_BLOOM_BITS_RATIO	#
cf_t1	MEMTABLE_PREFIX_BLOOM_HUGE_PAGE_TLB_SIZE	#
cf_t1	BLOOM_LOCALITY	#
cf_t1	MAX_SUCCESSIVE_MERGES	#
cf_t1	OPTIMIZE_FILTERS_FOR_HITS	#
cf_t1	MAX_BYTES_FOR_LEVEL_MULTIPLIER_ADDITIONAL	#
cf_t1	COMPRESSION_TYPE	#
cf_t1	COMPRESSION_PER_LEVEL	#
cf_t1	COMPRESSION_OPTS	#
cf_t1	BOTTOMMOST_COMPRESSION	#
cf_t1	PREFIX_EXTRACTOR	#
cf_t1	COMPACTION_STYLE	#
cf_t1	COMPACTION_OPTIONS_UNIVERSAL	#
cf_t1	COMPACTION_OPTION_FIFO::MAX_TABLE_FILES_SIZE	#
cf_t1	BLOCK_BASED_TABLE_FACTORY::CACHE_INDEX_AND_FILTER_BLOCKS	#
cf_t1	BLOCK_BASED_TABLE_FACTORY::INDEX_TYPE	#
cf_t1	BLOCK_BASED_TABLE_FACTORY::HASH_INDEX_ALLOW_COLLISION	#
cf_t1	BLOCK_BASED_TABLE_FACTORY::CHECKSUM	#
cf_t1	BLOCK_BASED_TABLE_FACTORY::NO_BLOCK_CACHE	#
cf_t1	BLOCK_BASED_TABLE_FACTORY::FILTER_POLICY	#
cf_t1	BLOCK_BASED_TABLE_FACTORY::WHOLE_KEY_FILTERING	#
cf_t1	BLOCK_BASED_TABLE_FACTORY::BLOCK_CACHE	#
cf_t1	BLOCK_BASED_TABLE_FACTORY::BLOCK_CACHE_COMPRESSED	#
cf_t1	BLOCK_BASED_TABLE_FACTORY::BLOCK_SIZE	#
cf_t1	BLOCK_BASED_TABLE_FACTORY::BLOCK_SIZE_DEVIATION	#
cf_t1	BLOCK_BASED_TABLE_FACTORY::BLOCK_RESTART_INTERVAL	#
cf_t1	BLOCK_BASED_TABLE_FACTORY::FORMAT_VERSION	#
default	COMPARATOR	#
default	MERGE_OPERATOR	#
default	COMPACTION_FILTER	#
default	COMPACTION_FILTER_FACTORY	#
default	WRITE_BUFFER_SIZE	#
default	MAX_WRITE_BUFFER_NUMBER	#
default	MIN_WRITE_BUFFER_NUMBER_TO_MERGE	#
default	NUM_LEVELS	#
default	LEVEL0_FILE_NUM_COMPACTION_TRIGGER	#
default	LEVEL0_SLOWDOWN_WRITES_TRIGGER	#
default	LEVEL0_STOP_WRITES_TRIGGER	#
default	MAX_MEM_COMPACTION_LEVEL	#
default	TARGET_FILE_SIZE_BASE	#
default	TARGET_FILE_SIZE_MULTIPLIER	#
default	MAX_BYTES_FOR_LEVEL_BASE	#
default	LEVEL_COMPACTION_DYNAMIC_LEVEL_BYTES	#
default	MAX_BYTES_FOR_LEVEL_MULTIPLIER	#
default	SOFT_RATE_LIMIT	#
default	HARD_RATE_LIMIT	#
default	RATE_LIMIT_DELAY_MAX_MILLISECONDS	#
default	ARENA_BLOCK_SIZE	#
default	DISABLE_AUTO_COMPACTIONS	#
default	PURGE_REDUNDANT_KVS_WHILE_FLUSH	#
default	MAX_SEQUENTIAL_SKIP_IN_ITERATIONS	#
default	MEMTABLE_FACTORY	#
default	INPLACE_UPDATE_SUPPORT	#
default	INPLACE_UPDATE_NUM_LOCKS	#
default	MEMTABLE_PREFIX_BLOOM_BITS_RATIO	#
default	MEMTABLE_PREFIX_BLOOM_HUGE_PAGE_TLB_SIZE	#
default	BLOOM_LOCALITY	#
default	MAX_SUCCESSIVE_MERGES	#
default	OPTIMIZE_FILTERS_FOR_HITS	#
default	MAX_BYTES_FOR_LEVEL_MULTIPLIER_ADDITIONAL	#
default	COMPRESSION_TYPE	#
default	COMPRESSION_PER_LEVEL	#
default	COMPRESSION_OPTS	#
default	BOTTOMMOST_COMPRESSION	#
default	PREFIX_EXTRACTOR	#
default	COMPACTION_STYLE	#
default	COMPACTION_OPTIONS_UNIVERSAL	#
default	COMPACTION_OPTION_FIFO::MAX_TABLE_FILES_SIZE	#
default	BLOCK_BASED_TABLE_FACTORY::CACHE_INDEX_AND_FILTER_BLOCKS	#
default	BLOCK_BASED_TABLE_FACTORY::INDEX_TYPE	#
default	BLOCK_BASED_TABLE_FACTORY::HASH_INDEX_ALLOW_COLLISION	#
default	BLOCK_BASED_TABLE_FACTORY::CHECKSUM	#
default	BLOCK_BASED_TABLE_FACTORY::NO_BLOCK_CACHE	#
default	BLOCK_BASED_TABLE_FACTORY::FILTER_POLICY	#
default	BLOCK_BASED_TABLE_FACTORY::WHOLE_KEY_FILTERING	#
default	BLOCK_BASED_TABLE_FACTORY::BLOCK_CACHE	#
default	BLOCK_BASED_TABLE_FACTORY::BLOCK_CACHE_COMPRESSED	#
default	BLOCK_BASED_TABLE_FACTORY::BLOCK_SIZE	#
default	BLOCK_BASED_TABLE_FACTORY::BLOCK_SIZE_DEVIATION	#
default	BLOCK_BASED_TABLE_FACTORY::BLOCK_RESTART_INTERVAL	#
default	BLOCK_BASED_TABLE_FACTORY::FORMAT_VERSION	#
rev:cf_t2	COMPARATOR	#
rev:cf_t2	MERGE_OPERATOR	#
rev:cf_t2	COMPACTION_FILTER	#
rev:cf_t2	COMPACTION_FILTER_FACTORY	#
rev:cf_t2	WRITE_BUFFER_SIZE	#
rev:cf_t2	MAX_WRITE_BUFFER_NUMBER	#
rev:cf_t2	MIN_WRITE_BUFFER_NUMBER_TO_MERGE	#
rev:cf_t2	NUM_LEVELS	#
rev:cf_t2	LEVEL0_FILE_NUM_COMPACTION_TRIGGER	#
rev:cf_t2	LEVEL0_SLOWDOWN_WRITES_TRIGGER	#
rev:cf_t2	LEVEL0_STOP_WRITES_TRIGGER	#
rev:cf_t2	MAX_MEM_COMPACTION_LEVEL	#
rev:cf_t2	TARGET_FILE_SIZE_BASE	#
rev:cf_t2	TARGET_FILE_SIZE_MULTIPLIER	#
rev:cf_t2	MAX_BYTES_FOR_LEVEL_BASE	#
rev:cf_t2	LEVEL_COMPACTION_DYNAMIC_LEVEL_BYTES	#
rev:cf_t2	MAX_BYTES_FOR_LEVEL_MULTIPLIER	#
rev:cf_t2	SOFT_RATE_LIMIT	#
rev:cf_t2	HARD_RATE_LIMIT	#
rev:cf_t2	RATE_LIMIT_DELAY_MAX_MILLISECONDS	#
rev:cf_t2	ARENA_BLOCK_SIZE	#
rev:cf_t2	DISABLE_AUTO_COMPACTIONS	#
rev:cf_t2	PURGE_REDUNDANT_KVS_WHILE_FLUSH	#
rev:cf_t2	MAX_SEQUENTIAL_SKIP_IN_ITERATIONS	#
rev:cf_t2	MEMTABLE_FACTORY	#
rev:cf_t2	INPLACE_UPDATE_SUPPORT	#
rev:cf_t2	INPLACE_UPDATE_NUM_LOCKS	#
rev:cf_t2	MEMTABLE_PREFIX_BLOOM_BITS_RATIO	#
rev:cf_t2	MEMTABLE_PREFIX_BLOOM_HUGE_PAGE_TLB_SIZE	#
rev:cf_t2	BLOOM_LOCALITY	#
rev:cf_t2	MAX_SUCCESSIVE_MERGES	#
rev:cf_t2	OPTIMIZE_FILTERS_FOR_HITS	#
rev:cf_t2	MAX_BYTES_FOR_LEVEL_MULTIPLIER_ADDITIONAL	#
rev:cf_t2	COMPRESSION_TYPE	#
rev:cf_t2	COMPRESSION_PER_LEVEL	#
rev:cf_t2	COMPRESSION_OPTS	#
rev:cf_t2	BOTTOMMOST_COMPRESSION	#
rev:cf_t2	PREFIX_EXTRACTOR	#
rev:cf_t2	COMPACTION_STYLE	#
rev:cf_t2	COMPACTION_OPTIONS_UNIVERSAL	#
rev:cf_t2	COMPACTION_OPTION_FIFO::MAX_TABLE_FILES_SIZE	#
rev:cf_t2	BLOCK_BASED_TABLE_FACTORY::CACHE_INDEX_AND_FILTER_BLOCKS	#
rev:cf_t2	BLOCK_BASED_TABLE_FACTORY::INDEX_TYPE	#
rev:cf_t2	BLOCK_BASED_TABLE_FACTORY::HASH_INDEX_ALLOW_COLLISION	#
rev:cf_t2	BLOCK_BASED_TABLE_FACTORY::CHECKSUM	#
rev:cf_t2	BLOCK_BASED_TABLE_FACTORY::NO_BLOCK_CACHE	#
rev:cf_t2	BLOCK_BASED_TABLE_FACTORY::FILTER_POLICY	#
rev:cf_t2	BLOCK_BASED_TABLE_FACTORY::WHOLE_KEY_FILTERING	#
rev:cf_t2	BLOCK_BASED_TABLE_FACTORY::BLOCK_CACHE	#
rev:cf_t2	BLOCK_BASED_TABLE_FACTORY::BLOCK_CACHE_COMPRESSED	#
rev:cf_t2	BLOCK_BASED_TABLE_FACTORY::BLOCK_SIZE	#
rev:cf_t2	BLOCK_BASED_TABLE_FACTORY::BLOCK_SIZE_DEVIATION	#
rev:cf_t2	BLOCK_BASED_TABLE_FACTORY::BLOCK_RESTART_INTERVAL	#
rev:cf_t2	BLOCK_BASED_TABLE_FACTORY::FORMAT_VERSION	#
DROP TABLE t1;
DROP TABLE t2;
DROP TABLE t3;
DROP TABLE t4;
SHOW ENGINE rocksdb MUTEX;
Type	Name	Status
SHOW ENGINE ALL MUTEX;
SHOW ENGINE rocksdb TRANSACTION STATUS;
Type	Name	Status
SNAPSHOTS	rocksdb	
============================================================
TIMESTAMP ROCKSDB TRANSACTION MONITOR OUTPUT
============================================================
---------
SNAPSHOTS
---------
LIST OF SNAPSHOTS FOR EACH SESSION:
-----------------------------------------
END OF ROCKSDB TRANSACTION MONITOR OUTPUT
=========================================

START TRANSACTION WITH CONSISTENT SNAPSHOT;
SHOW ENGINE rocksdb TRANSACTION STATUS;
Type	Name	Status
SNAPSHOTS	rocksdb	
============================================================
TIMESTAMP ROCKSDB TRANSACTION MONITOR OUTPUT
============================================================
---------
SNAPSHOTS
---------
LIST OF SNAPSHOTS FOR EACH SESSION:
---SNAPSHOT, ACTIVE NUM sec
MySQL thread id TID, OS thread handle PTR, query id QID localhost root ACTION
SHOW ENGINE rocksdb TRANSACTION STATUS
lock count 0, write count 0
-----------------------------------------
END OF ROCKSDB TRANSACTION MONITOR OUTPUT
=========================================

ROLLBACK;
